<?php

define('WPSL_ENC_METHOD', 'AES-256-CBC');

$wpsl_cnc_gfonts_json = '{"ABeeZee":["regular","italic"],"Abel":["regular"],"Abhaya Libre":["regular","500","600","700","800"],"Abril Fatface":["regular"],"Aclonica":["regular"],"Acme":["regular"],"Actor":["regular"],"Adamina":["regular"],"Advent Pro":["100","200","300","regular","500","600","700"],"Aguafina Script":["regular"],"Akronim":["regular"],"Aladin":["regular"],"Aldrich":["regular"],"Alef":["regular","700"],"Alegreya":["regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"],"Alegreya SC":["regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"],"Alegreya Sans":["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"],"Alegreya Sans SC":["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"],"Aleo":["300","300italic","regular","italic","700","700italic"],"Alex Brush":["regular"],"Alfa Slab One":["regular"],"Alice":["regular"],"Alike":["regular"],"Alike Angular":["regular"],"Allan":["regular","700"],"Allerta":["regular"],"Allerta Stencil":["regular"],"Allura":["regular"],"Almendra":["regular","italic","700","700italic"],"Almendra Display":["regular"],"Almendra SC":["regular"],"Amarante":["regular"],"Amaranth":["regular","italic","700","700italic"],"Amatic SC":["regular","700"],"Amethysta":["regular"],"Amiko":["regular","600","700"],"Amiri":["regular","italic","700","700italic"],"Amita":["regular","700"],"Anaheim":["regular"],"Andada":["regular"],"Andika":["regular"],"Angkor":["regular"],"Annie Use Your Telescope":["regular"],"Anonymous Pro":["regular","italic","700","700italic"],"Antic":["regular"],"Antic Didone":["regular"],"Antic Slab":["regular"],"Anton":["regular"],"Arapey":["regular","italic"],"Arbutus":["regular"],"Arbutus Slab":["regular"],"Architects Daughter":["regular"],"Archivo":["regular","italic","500","500italic","600","600italic","700","700italic"],"Archivo Black":["regular"],"Archivo Narrow":["regular","italic","500","500italic","600","600italic","700","700italic"],"Aref Ruqaa":["regular","700"],"Arima Madurai":["100","200","300","regular","500","700","800","900"],"Arimo":["regular","italic","700","700italic"],"Arizonia":["regular"],"Armata":["regular"],"Arsenal":["regular","italic","700","700italic"],"Artifika":["regular"],"Arvo":["regular","italic","700","700italic"],"Arya":["regular","700"],"Asap":["regular","italic","500","500italic","600","600italic","700","700italic"],"Asap Condensed":["regular","italic","500","500italic","600","600italic","700","700italic"],"Asar":["regular"],"Asset":["regular"],"Assistant":["200","300","regular","600","700","800"],"Astloch":["regular","700"],"Asul":["regular","700"],"Athiti":["200","300","regular","500","600","700"],"Atma":["300","regular","500","600","700"],"Atomic Age":["regular"],"Aubrey":["regular"],"Audiowide":["regular"],"Autour One":["regular"],"Average":["regular"],"Average Sans":["regular"],"Averia Gruesa Libre":["regular"],"Averia Libre":["300","300italic","regular","italic","700","700italic"],"Averia Sans Libre":["300","300italic","regular","italic","700","700italic"],"Averia Serif Libre":["300","300italic","regular","italic","700","700italic"],"B612":["regular","italic","700","700italic"],"B612 Mono":["regular","italic","700","700italic"],"Bad Script":["regular"],"Bahiana":["regular"],"Bai Jamjuree":["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Baloo":["regular"],"Baloo Bhai":["regular"],"Baloo Bhaijaan":["regular"],"Baloo Bhaina":["regular"],"Baloo Chettan":["regular"],"Baloo Da":["regular"],"Baloo Paaji":["regular"],"Baloo Tamma":["regular"],"Baloo Tammudu":["regular"],"Baloo Thambi":["regular"],"Balthazar":["regular"],"Bangers":["regular"],"Barlow":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Barlow Condensed":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Barlow Semi Condensed":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Barrio":["regular"],"Basic":["regular"],"Battambang":["regular","700"],"Baumans":["regular"],"Bayon":["regular"],"Belgrano":["regular"],"Bellefair":["regular"],"Belleza":["regular"],"BenchNine":["300","regular","700"],"Bentham":["regular"],"Berkshire Swash":["regular"],"Bevan":["regular"],"Bigelow Rules":["regular"],"Bigshot One":["regular"],"Bilbo":["regular"],"Bilbo Swash Caps":["regular"],"BioRhyme":["200","300","regular","700","800"],"BioRhyme Expanded":["200","300","regular","700","800"],"Biryani":["200","300","regular","600","700","800","900"],"Bitter":["regular","italic","700"],"Black And White Picture":["regular"],"Black Han Sans":["regular"],"Black Ops One":["regular"],"Bokor":["regular"],"Bonbon":["regular"],"Boogaloo":["regular"],"Bowlby One":["regular"],"Bowlby One SC":["regular"],"Brawler":["regular"],"Bree Serif":["regular"],"Bubblegum Sans":["regular"],"Bubbler One":["regular"],"Buda":["300"],"Buenard":["regular","700"],"Bungee":["regular"],"Bungee Hairline":["regular"],"Bungee Inline":["regular"],"Bungee Outline":["regular"],"Bungee Shade":["regular"],"Butcherman":["regular"],"Butterfly Kids":["regular"],"Cabin":["regular","italic","500","500italic","600","600italic","700","700italic"],"Cabin Condensed":["regular","500","600","700"],"Cabin Sketch":["regular","700"],"Caesar Dressing":["regular"],"Cagliostro":["regular"],"Cairo":["200","300","regular","600","700","900"],"Calligraffitti":["regular"],"Cambay":["regular","italic","700","700italic"],"Cambo":["regular"],"Candal":["regular"],"Cantarell":["regular","italic","700","700italic"],"Cantata One":["regular"],"Cantora One":["regular"],"Capriola":["regular"],"Cardo":["regular","italic","700"],"Carme":["regular"],"Carrois Gothic":["regular"],"Carrois Gothic SC":["regular"],"Carter One":["regular"],"Catamaran":["100","200","300","regular","500","600","700","800","900"],"Caudex":["regular","italic","700","700italic"],"Caveat":["regular","700"],"Caveat Brush":["regular"],"Cedarville Cursive":["regular"],"Ceviche One":["regular"],"Chakra Petch":["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Changa":["200","300","regular","500","600","700","800"],"Changa One":["regular","italic"],"Chango":["regular"],"Charm":["regular","700"],"Charmonman":["regular","700"],"Chathura":["100","300","regular","700","800"],"Chau Philomene One":["regular","italic"],"Chela One":["regular"],"Chelsea Market":["regular"],"Chenla":["regular"],"Cherry Cream Soda":["regular"],"Cherry Swash":["regular","700"],"Chewy":["regular"],"Chicle":["regular"],"Chivo":["300","300italic","regular","italic","700","700italic","900","900italic"],"Chonburi":["regular"],"Cinzel":["regular","700","900"],"Cinzel Decorative":["regular","700","900"],"Clicker Script":["regular"],"Coda":["regular","800"],"Coda Caption":["800"],"Codystar":["300","regular"],"Coiny":["regular"],"Combo":["regular"],"Comfortaa":["300","regular","500","600","700"],"Coming Soon":["regular"],"Concert One":["regular"],"Condiment":["regular"],"Content":["regular","700"],"Contrail One":["regular"],"Convergence":["regular"],"Cookie":["regular"],"Copse":["regular"],"Corben":["regular","700"],"Cormorant":["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Cormorant Garamond":["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Cormorant Infant":["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Cormorant SC":["300","regular","500","600","700"],"Cormorant Unicase":["300","regular","500","600","700"],"Cormorant Upright":["300","regular","500","600","700"],"Courgette":["regular"],"Cousine":["regular","italic","700","700italic"],"Coustard":["regular","900"],"Covered By Your Grace":["regular"],"Crafty Girls":["regular"],"Creepster":["regular"],"Crete Round":["regular","italic"],"Crimson Text":["regular","italic","600","600italic","700","700italic"],"Croissant One":["regular"],"Crushed":["regular"],"Cuprum":["regular","italic","700","700italic"],"Cute Font":["regular"],"Cutive":["regular"],"Cutive Mono":["regular"],"Damion":["regular"],"Dancing Script":["regular","700"],"Dangrek":["regular"],"David Libre":["regular","500","700"],"Dawning of a New Day":["regular"],"Days One":["regular"],"Dekko":["regular"],"Delius":["regular"],"Delius Swash Caps":["regular"],"Delius Unicase":["regular","700"],"Della Respira":["regular"],"Denk One":["regular"],"Devonshire":["regular"],"Dhurjati":["regular"],"Didact Gothic":["regular"],"Diplomata":["regular"],"Diplomata SC":["regular"],"Do Hyeon":["regular"],"Dokdo":["regular"],"Domine":["regular","700"],"Donegal One":["regular"],"Doppio One":["regular"],"Dorsa":["regular"],"Dosis":["200","300","regular","500","600","700","800"],"Dr Sugiyama":["regular"],"Duru Sans":["regular"],"Dynalight":["regular"],"EB Garamond":["regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"],"Eagle Lake":["regular"],"East Sea Dokdo":["regular"],"Eater":["regular"],"Economica":["regular","italic","700","700italic"],"Eczar":["regular","500","600","700","800"],"El Messiri":["regular","500","600","700"],"Electrolize":["regular"],"Elsie":["regular","900"],"Elsie Swash Caps":["regular","900"],"Emblema One":["regular"],"Emilys Candy":["regular"],"Encode Sans":["100","200","300","regular","500","600","700","800","900"],"Encode Sans Condensed":["100","200","300","regular","500","600","700","800","900"],"Encode Sans Expanded":["100","200","300","regular","500","600","700","800","900"],"Encode Sans Semi Condensed":["100","200","300","regular","500","600","700","800","900"],"Encode Sans Semi Expanded":["100","200","300","regular","500","600","700","800","900"],"Engagement":["regular"],"Englebert":["regular"],"Enriqueta":["regular","700"],"Erica One":["regular"],"Esteban":["regular"],"Euphoria Script":["regular"],"Ewert":["regular"],"Exo":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Exo 2":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Expletus Sans":["regular","italic","500","500italic","600","600italic","700","700italic"],"Fahkwang":["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Fanwood Text":["regular","italic"],"Farsan":["regular"],"Fascinate":["regular"],"Fascinate Inline":["regular"],"Faster One":["regular"],"Fasthand":["regular"],"Fauna One":["regular"],"Faustina":["regular","italic","500","500italic","600","600italic","700","700italic"],"Federant":["regular"],"Federo":["regular"],"Felipa":["regular"],"Fenix":["regular"],"Finger Paint":["regular"],"Fira Mono":["regular","500","700"],"Fira Sans":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Fira Sans Condensed":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Fira Sans Extra Condensed":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Fjalla One":["regular"],"Fjord One":["regular"],"Flamenco":["300","regular"],"Flavors":["regular"],"Fondamento":["regular","italic"],"Fontdiner Swanky":["regular"],"Forum":["regular"],"Francois One":["regular"],"Frank Ruhl Libre":["300","regular","500","700","900"],"Freckle Face":["regular"],"Fredericka the Great":["regular"],"Fredoka One":["regular"],"Freehand":["regular"],"Fresca":["regular"],"Frijole":["regular"],"Fruktur":["regular"],"Fugaz One":["regular"],"GFS Didot":["regular"],"GFS Neohellenic":["regular","italic","700","700italic"],"Gabriela":["regular"],"Gaegu":["300","regular","700"],"Gafata":["regular"],"Galada":["regular"],"Galdeano":["regular"],"Galindo":["regular"],"Gamja Flower":["regular"],"Gentium Basic":["regular","italic","700","700italic"],"Gentium Book Basic":["regular","italic","700","700italic"],"Geo":["regular","italic"],"Geostar":["regular"],"Geostar Fill":["regular"],"Germania One":["regular"],"Gidugu":["regular"],"Gilda Display":["regular"],"Give You Glory":["regular"],"Glass Antiqua":["regular"],"Glegoo":["regular","700"],"Gloria Hallelujah":["regular"],"Goblin One":["regular"],"Gochi Hand":["regular"],"Gorditas":["regular","700"],"Gothic A1":["100","200","300","regular","500","600","700","800","900"],"Goudy Bookletter 1911":["regular"],"Graduate":["regular"],"Grand Hotel":["regular"],"Gravitas One":["regular"],"Great Vibes":["regular"],"Griffy":["regular"],"Gruppo":["regular"],"Gudea":["regular","italic","700"],"Gugi":["regular"],"Gurajada":["regular"],"Habibi":["regular"],"Halant":["300","regular","500","600","700"],"Hammersmith One":["regular"],"Hanalei":["regular"],"Hanalei Fill":["regular"],"Handlee":["regular"],"Hanuman":["regular","700"],"Happy Monkey":["regular"],"Harmattan":["regular"],"Headland One":["regular"],"Heebo":["100","300","regular","500","700","800","900"],"Henny Penny":["regular"],"Herr Von Muellerhoff":["regular"],"Hi Melody":["regular"],"Hind":["300","regular","500","600","700"],"Hind Guntur":["300","regular","500","600","700"],"Hind Madurai":["300","regular","500","600","700"],"Hind Siliguri":["300","regular","500","600","700"],"Hind Vadodara":["300","regular","500","600","700"],"Holtwood One SC":["regular"],"Homemade Apple":["regular"],"Homenaje":["regular"],"IBM Plex Mono":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"IBM Plex Sans":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"IBM Plex Sans Condensed":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"IBM Plex Serif":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"IM Fell DW Pica":["regular","italic"],"IM Fell DW Pica SC":["regular"],"IM Fell Double Pica":["regular","italic"],"IM Fell Double Pica SC":["regular"],"IM Fell English":["regular","italic"],"IM Fell English SC":["regular"],"IM Fell French Canon":["regular","italic"],"IM Fell French Canon SC":["regular"],"IM Fell Great Primer":["regular","italic"],"IM Fell Great Primer SC":["regular"],"Iceberg":["regular"],"Iceland":["regular"],"Imprima":["regular"],"Inconsolata":["regular","700"],"Inder":["regular"],"Indie Flower":["regular"],"Inika":["regular","700"],"Inknut Antiqua":["300","regular","500","600","700","800","900"],"Irish Grover":["regular"],"Istok Web":["regular","italic","700","700italic"],"Italiana":["regular"],"Italianno":["regular"],"Itim":["regular"],"Jacques Francois":["regular"],"Jacques Francois Shadow":["regular"],"Jaldi":["regular","700"],"Jim Nightshade":["regular"],"Jockey One":["regular"],"Jolly Lodger":["regular"],"Jomhuria":["regular"],"Josefin Sans":["100","100italic","300","300italic","regular","italic","600","600italic","700","700italic"],"Josefin Slab":["100","100italic","300","300italic","regular","italic","600","600italic","700","700italic"],"Joti One":["regular"],"Jua":["regular"],"Judson":["regular","italic","700"],"Julee":["regular"],"Julius Sans One":["regular"],"Junge":["regular"],"Jura":["300","regular","500","600","700"],"Just Another Hand":["regular"],"Just Me Again Down Here":["regular"],"K2D":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"],"Kadwa":["regular","700"],"Kalam":["300","regular","700"],"Kameron":["regular","700"],"Kanit":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Kantumruy":["300","regular","700"],"Karla":["regular","italic","700","700italic"],"Karma":["300","regular","500","600","700"],"Katibeh":["regular"],"Kaushan Script":["regular"],"Kavivanar":["regular"],"Kavoon":["regular"],"Kdam Thmor":["regular"],"Keania One":["regular"],"Kelly Slab":["regular"],"Kenia":["regular"],"Khand":["300","regular","500","600","700"],"Khmer":["regular"],"Khula":["300","regular","600","700","800"],"Kirang Haerang":["regular"],"Kite One":["regular"],"Knewave":["regular"],"KoHo":["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Kodchasan":["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Kosugi":["regular"],"Kosugi Maru":["regular"],"Kotta One":["regular"],"Koulen":["regular"],"Kranky":["regular"],"Kreon":["300","regular","700"],"Kristi":["regular"],"Krona One":["regular"],"Krub":["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Kumar One":["regular"],"Kumar One Outline":["regular"],"Kurale":["regular"],"La Belle Aurore":["regular"],"Laila":["300","regular","500","600","700"],"Lakki Reddy":["regular"],"Lalezar":["regular"],"Lancelot":["regular"],"Lateef":["regular"],"Lato":["100","100italic","300","300italic","regular","italic","700","700italic","900","900italic"],"League Script":["regular"],"Leckerli One":["regular"],"Ledger":["regular"],"Lekton":["regular","italic","700"],"Lemon":["regular"],"Lemonada":["300","regular","600","700"],"Libre Barcode 128":["regular"],"Libre Barcode 128 Text":["regular"],"Libre Barcode 39":["regular"],"Libre Barcode 39 Extended":["regular"],"Libre Barcode 39 Extended Text":["regular"],"Libre Barcode 39 Text":["regular"],"Libre Baskerville":["regular","italic","700"],"Libre Franklin":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Life Savers":["regular","700"],"Lilita One":["regular"],"Lily Script One":["regular"],"Limelight":["regular"],"Linden Hill":["regular","italic"],"Lobster":["regular"],"Lobster Two":["regular","italic","700","700italic"],"Londrina Outline":["regular"],"Londrina Shadow":["regular"],"Londrina Sketch":["regular"],"Londrina Solid":["100","300","regular","900"],"Lora":["regular","italic","700","700italic"],"Love Ya Like A Sister":["regular"],"Loved by the King":["regular"],"Lovers Quarrel":["regular"],"Luckiest Guy":["regular"],"Lusitana":["regular","700"],"Lustria":["regular"],"M PLUS 1p":["100","300","regular","500","700","800","900"],"M PLUS Rounded 1c":["100","300","regular","500","700","800","900"],"Macondo":["regular"],"Macondo Swash Caps":["regular"],"Mada":["200","300","regular","500","600","700","900"],"Magra":["regular","700"],"Maiden Orange":["regular"],"Maitree":["200","300","regular","500","600","700"],"Major Mono Display":["regular"],"Mako":["regular"],"Mali":["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Mallanna":["regular"],"Mandali":["regular"],"Manuale":["regular","italic","500","500italic","600","600italic","700","700italic"],"Marcellus":["regular"],"Marcellus SC":["regular"],"Marck Script":["regular"],"Margarine":["regular"],"Markazi Text":["regular","500","600","700"],"Marko One":["regular"],"Marmelad":["regular"],"Martel":["200","300","regular","600","700","800","900"],"Martel Sans":["200","300","regular","600","700","800","900"],"Marvel":["regular","italic","700","700italic"],"Mate":["regular","italic"],"Mate SC":["regular"],"Maven Pro":["regular","500","700","900"],"McLaren":["regular"],"Meddon":["regular"],"MedievalSharp":["regular"],"Medula One":["regular"],"Meera Inimai":["regular"],"Megrim":["regular"],"Meie Script":["regular"],"Merienda":["regular","700"],"Merienda One":["regular"],"Merriweather":["300","300italic","regular","italic","700","700italic","900","900italic"],"Merriweather Sans":["300","300italic","regular","italic","700","700italic","800","800italic"],"Metal":["regular"],"Metal Mania":["regular"],"Metamorphous":["regular"],"Metrophobic":["regular"],"Michroma":["regular"],"Milonga":["regular"],"Miltonian":["regular"],"Miltonian Tattoo":["regular"],"Mina":["regular","700"],"Miniver":["regular"],"Miriam Libre":["regular","700"],"Mirza":["regular","500","600","700"],"Miss Fajardose":["regular"],"Mitr":["200","300","regular","500","600","700"],"Modak":["regular"],"Modern Antiqua":["regular"],"Mogra":["regular"],"Molengo":["regular"],"Molle":["italic"],"Monda":["regular","700"],"Monofett":["regular"],"Monoton":["regular"],"Monsieur La Doulaise":["regular"],"Montaga":["regular"],"Montez":["regular"],"Montserrat":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Montserrat Alternates":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Montserrat Subrayada":["regular","700"],"Moul":["regular"],"Moulpali":["regular"],"Mountains of Christmas":["regular","700"],"Mouse Memoirs":["regular"],"Mr Bedfort":["regular"],"Mr Dafoe":["regular"],"Mr De Haviland":["regular"],"Mrs Saint Delafield":["regular"],"Mrs Sheppards":["regular"],"Mukta":["200","300","regular","500","600","700","800"],"Mukta Mahee":["200","300","regular","500","600","700","800"],"Mukta Malar":["200","300","regular","500","600","700","800"],"Mukta Vaani":["200","300","regular","500","600","700","800"],"Muli":["200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Mystery Quest":["regular"],"NTR":["regular"],"Nanum Brush Script":["regular"],"Nanum Gothic":["regular","700","800"],"Nanum Gothic Coding":["regular","700"],"Nanum Myeongjo":["regular","700","800"],"Nanum Pen Script":["regular"],"Neucha":["regular"],"Neuton":["200","300","regular","italic","700","800"],"New Rocker":["regular"],"News Cycle":["regular","700"],"Niconne":["regular"],"Niramit":["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Nixie One":["regular"],"Nobile":["regular","italic","500","500italic","700","700italic"],"Nokora":["regular","700"],"Norican":["regular"],"Nosifer":["regular"],"Notable":["regular"],"Nothing You Could Do":["regular"],"Noticia Text":["regular","italic","700","700italic"],"Noto Sans":["regular","italic","700","700italic"],"Noto Sans HK":["100","300","regular","500","700","900"],"Noto Sans JP":["100","300","regular","500","700","900"],"Noto Sans KR":["100","300","regular","500","700","900"],"Noto Sans SC":["100","300","regular","500","700","900"],"Noto Sans TC":["100","300","regular","500","700","900"],"Noto Serif":["regular","italic","700","700italic"],"Noto Serif JP":["200","300","regular","500","600","700","900"],"Noto Serif KR":["200","300","regular","500","600","700","900"],"Noto Serif SC":["200","300","regular","500","600","700","900"],"Noto Serif TC":["200","300","regular","500","600","700","900"],"Nova Cut":["regular"],"Nova Flat":["regular"],"Nova Mono":["regular"],"Nova Oval":["regular"],"Nova Round":["regular"],"Nova Script":["regular"],"Nova Slim":["regular"],"Nova Square":["regular"],"Numans":["regular"],"Nunito":["200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Nunito Sans":["200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Odor Mean Chey":["regular"],"Offside":["regular"],"Old Standard TT":["regular","italic","700"],"Oldenburg":["regular"],"Oleo Script":["regular","700"],"Oleo Script Swash Caps":["regular","700"],"Open Sans":["300","300italic","regular","italic","600","600italic","700","700italic","800","800italic"],"Open Sans Condensed":["300","300italic","700"],"Oranienbaum":["regular"],"Orbitron":["regular","500","700","900"],"Oregano":["regular","italic"],"Orienta":["regular"],"Original Surfer":["regular"],"Oswald":["200","300","regular","500","600","700"],"Over the Rainbow":["regular"],"Overlock":["regular","italic","700","700italic","900","900italic"],"Overlock SC":["regular"],"Overpass":["100","100italic","200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Overpass Mono":["300","regular","600","700"],"Ovo":["regular"],"Oxygen":["300","regular","700"],"Oxygen Mono":["regular"],"PT Mono":["regular"],"PT Sans":["regular","italic","700","700italic"],"PT Sans Caption":["regular","700"],"PT Sans Narrow":["regular","700"],"PT Serif":["regular","italic","700","700italic"],"PT Serif Caption":["regular","italic"],"Pacifico":["regular"],"Padauk":["regular","700"],"Palanquin":["100","200","300","regular","500","600","700"],"Palanquin Dark":["regular","500","600","700"],"Pangolin":["regular"],"Paprika":["regular"],"Parisienne":["regular"],"Passero One":["regular"],"Passion One":["regular","700","900"],"Pathway Gothic One":["regular"],"Patrick Hand":["regular"],"Patrick Hand SC":["regular"],"Pattaya":["regular"],"Patua One":["regular"],"Pavanam":["regular"],"Paytone One":["regular"],"Peddana":["regular"],"Peralta":["regular"],"Permanent Marker":["regular"],"Petit Formal Script":["regular"],"Petrona":["regular"],"Philosopher":["regular","italic","700","700italic"],"Piedra":["regular"],"Pinyon Script":["regular"],"Pirata One":["regular"],"Plaster":["regular"],"Play":["regular","700"],"Playball":["regular"],"Playfair Display":["regular","italic","700","700italic","900","900italic"],"Playfair Display SC":["regular","italic","700","700italic","900","900italic"],"Podkova":["regular","500","600","700","800"],"Poiret One":["regular"],"Poller One":["regular"],"Poly":["regular","italic"],"Pompiere":["regular"],"Pontano Sans":["regular"],"Poor Story":["regular"],"Poppins":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Port Lligat Sans":["regular"],"Port Lligat Slab":["regular"],"Pragati Narrow":["regular","700"],"Prata":["regular"],"Preahvihear":["regular"],"Press Start 2P":["regular"],"Pridi":["200","300","regular","500","600","700"],"Princess Sofia":["regular"],"Prociono":["regular"],"Prompt":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Prosto One":["regular"],"Proza Libre":["regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"],"Puritan":["regular","italic","700","700italic"],"Purple Purse":["regular"],"Quando":["regular"],"Quantico":["regular","italic","700","700italic"],"Quattrocento":["regular","700"],"Quattrocento Sans":["regular","italic","700","700italic"],"Questrial":["regular"],"Quicksand":["300","regular","500","700"],"Quintessential":["regular"],"Qwigley":["regular"],"Racing Sans One":["regular"],"Radley":["regular","italic"],"Rajdhani":["300","regular","500","600","700"],"Rakkas":["regular"],"Raleway":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Raleway Dots":["regular"],"Ramabhadra":["regular"],"Ramaraja":["regular"],"Rambla":["regular","italic","700","700italic"],"Rammetto One":["regular"],"Ranchers":["regular"],"Rancho":["regular"],"Ranga":["regular","700"],"Rasa":["300","regular","500","600","700"],"Rationale":["regular"],"Ravi Prakash":["regular"],"Redressed":["regular"],"Reem Kufi":["regular"],"Reenie Beanie":["regular"],"Revalia":["regular"],"Rhodium Libre":["regular"],"Ribeye":["regular"],"Ribeye Marrow":["regular"],"Righteous":["regular"],"Risque":["regular"],"Roboto":["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic","900","900italic"],"Roboto Condensed":["300","300italic","regular","italic","700","700italic"],"Roboto Mono":["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic"],"Roboto Slab":["100","300","regular","700"],"Rochester":["regular"],"Rock Salt":["regular"],"Rokkitt":["100","200","300","regular","500","600","700","800","900"],"Romanesco":["regular"],"Ropa Sans":["regular","italic"],"Rosario":["regular","italic","700","700italic"],"Rosarivo":["regular","italic"],"Rouge Script":["regular"],"Rozha One":["regular"],"Rubik":["300","300italic","regular","italic","500","500italic","700","700italic","900","900italic"],"Rubik Mono One":["regular"],"Ruda":["regular","700","900"],"Rufina":["regular","700"],"Ruge Boogie":["regular"],"Ruluko":["regular"],"Rum Raisin":["regular"],"Ruslan Display":["regular"],"Russo One":["regular"],"Ruthie":["regular"],"Rye":["regular"],"Sacramento":["regular"],"Sahitya":["regular","700"],"Sail":["regular"],"Saira":["100","200","300","regular","500","600","700","800","900"],"Saira Condensed":["100","200","300","regular","500","600","700","800","900"],"Saira Extra Condensed":["100","200","300","regular","500","600","700","800","900"],"Saira Semi Condensed":["100","200","300","regular","500","600","700","800","900"],"Salsa":["regular"],"Sanchez":["regular","italic"],"Sancreek":["regular"],"Sansita":["regular","italic","700","700italic","800","800italic","900","900italic"],"Sarabun":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"],"Sarala":["regular","700"],"Sarina":["regular"],"Sarpanch":["regular","500","600","700","800","900"],"Satisfy":["regular"],"Sawarabi Gothic":["regular"],"Sawarabi Mincho":["regular"],"Scada":["regular","italic","700","700italic"],"Scheherazade":["regular","700"],"Schoolbell":["regular"],"Scope One":["regular"],"Seaweed Script":["regular"],"Secular One":["regular"],"Sedgwick Ave":["regular"],"Sedgwick Ave Display":["regular"],"Sevillana":["regular"],"Seymour One":["regular"],"Shadows Into Light":["regular"],"Shadows Into Light Two":["regular"],"Shanti":["regular"],"Share":["regular","italic","700","700italic"],"Share Tech":["regular"],"Share Tech Mono":["regular"],"Shojumaru":["regular"],"Short Stack":["regular"],"Shrikhand":["regular"],"Siemreap":["regular"],"Sigmar One":["regular"],"Signika":["300","regular","600","700"],"Signika Negative":["300","regular","600","700"],"Simonetta":["regular","italic","900","900italic"],"Sintony":["regular","700"],"Sirin Stencil":["regular"],"Six Caps":["regular"],"Skranji":["regular","700"],"Slabo 13px":["regular"],"Slabo 27px":["regular"],"Slackey":["regular"],"Smokum":["regular"],"Smythe":["regular"],"Sniglet":["regular","800"],"Snippet":["regular"],"Snowburst One":["regular"],"Sofadi One":["regular"],"Sofia":["regular"],"Song Myung":["regular"],"Sonsie One":["regular"],"Sorts Mill Goudy":["regular","italic"],"Source Code Pro":["200","300","regular","500","600","700","900"],"Source Sans Pro":["200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","900","900italic"],"Source Serif Pro":["regular","600","700"],"Space Mono":["regular","italic","700","700italic"],"Special Elite":["regular"],"Spectral":["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"],"Spectral SC":["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"],"Spicy Rice":["regular"],"Spinnaker":["regular"],"Spirax":["regular"],"Squada One":["regular"],"Sree Krushnadevaraya":["regular"],"Sriracha":["regular"],"Srisakdi":["regular","700"],"Staatliches":["regular"],"Stalemate":["regular"],"Stalinist One":["regular"],"Stardos Stencil":["regular","700"],"Stint Ultra Condensed":["regular"],"Stint Ultra Expanded":["regular"],"Stoke":["300","regular"],"Strait":["regular"],"Stylish":["regular"],"Sue Ellen Francisco":["regular"],"Suez One":["regular"],"Sumana":["regular","700"],"Sunflower":["300","500","700"],"Sunshiney":["regular"],"Supermercado One":["regular"],"Sura":["regular","700"],"Suranna":["regular"],"Suravaram":["regular"],"Suwannaphum":["regular"],"Swanky and Moo Moo":["regular"],"Syncopate":["regular","700"],"Tajawal":["200","300","regular","500","700","800","900"],"Tangerine":["regular","700"],"Taprom":["regular"],"Tauri":["regular"],"Taviraj":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Teko":["300","regular","500","600","700"],"Telex":["regular"],"Tenali Ramakrishna":["regular"],"Tenor Sans":["regular"],"Text Me One":["regular"],"Thasadith":["regular","italic","700","700italic"],"The Girl Next Door":["regular"],"Tienne":["regular","700","900"],"Tillana":["regular","500","600","700","800"],"Timmana":["regular"],"Tinos":["regular","italic","700","700italic"],"Titan One":["regular"],"Titillium Web":["200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","900"],"Trade Winds":["regular"],"Trirong":["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],"Trocchi":["regular"],"Trochut":["regular","italic","700"],"Trykker":["regular"],"Tulpen One":["regular"],"Ubuntu":["300","300italic","regular","italic","500","500italic","700","700italic"],"Ubuntu Condensed":["regular"],"Ubuntu Mono":["regular","italic","700","700italic"],"Ultra":["regular"],"Uncial Antiqua":["regular"],"Underdog":["regular"],"Unica One":["regular"],"UnifrakturCook":["700"],"UnifrakturMaguntia":["regular"],"Unkempt":["regular","700"],"Unlock":["regular"],"Unna":["regular","italic","700","700italic"],"VT323":["regular"],"Vampiro One":["regular"],"Varela":["regular"],"Varela Round":["regular"],"Vast Shadow":["regular"],"Vesper Libre":["regular","500","700","900"],"Vibur":["regular"],"Vidaloka":["regular"],"Viga":["regular"],"Voces":["regular"],"Volkhov":["regular","italic","700","700italic"],"Vollkorn":["regular","italic","600","600italic","700","700italic","900","900italic"],"Vollkorn SC":["regular","600","700","900"],"Voltaire":["regular"],"Waiting for the Sunrise":["regular"],"Wallpoet":["regular"],"Walter Turncoat":["regular"],"Warnes":["regular"],"Wellfleet":["regular"],"Wendy One":["regular"],"Wire One":["regular"],"Work Sans":["100","200","300","regular","500","600","700","800","900"],"Yanone Kaffeesatz":["200","300","regular","700"],"Yantramanav":["100","300","regular","500","700","900"],"Yatra One":["regular"],"Yellowtail":["regular"],"Yeon Sung":["regular"],"Yeseva One":["regular"],"Yesteryear":["regular"],"Yrsa":["300","regular","500","600","700"],"ZCOOL KuaiLe":["regular"],"ZCOOL QingKe HuangYou":["regular"],"ZCOOL XiaoWei":["regular"],"Zeyada":["regular"],"Zilla Slab":["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"],"Zilla Slab Highlight":["regular","700"]}';

$wpsl_cnc_gfonts = json_decode($wpsl_cnc_gfonts_json, true);


/**
 * Encrypts
 */
function wpsl_encrypt($string){
	return @openssl_encrypt($string, 'AES-256-CBC', WPSL_KEY);
}

/**
 * Decrypts
 */
function wpsl_decrypt($string){
	return @openssl_decrypt($string, 'AES-256-CBC', WPSL_KEY);
}

/**
 * Check if contact form 7 installed and enabled
 */
function wpsl_cf7_installed(){
	return defined('WPCF7_VERSION') && WPCF7_VERSION != '';
}

/**
 * Get Locker template IDs
 */
function wpsl_locker_widget_templates($full=false){

	$templates	=	array();

	foreach( glob(WPSL_ROOT_DIR . 'templates/lockers/*' , GLOB_ONLYDIR) as $dir ){

		$template_id		=	basename($dir);

		if( $full ){
			$templates[]		=	wpsl_fw_template( $template_id, 'locker' );
		}else{
			$templates[]		=	$template_id;
		}

	}

	return $templates;

}


/**
 * Get Floating Widget template details
 */
function wpsl_fw_template( $id, $type ){

	$return	=	array();

	# Fix for older wp versions where esc_url strips spaces
	$id	=	str_replace( ' ', '%20', $id );

	$return['id']										=	$id;
	$dir														=	'lockers';
	$return['icon']									=	WPSL_ROOT_URL . 'templates/'.$dir.'/'.$id.'/icon.png';
	$return['css']									=	WPSL_ROOT_URL . 'templates/'.$dir.'/'.$id.'/style.css';
	$return['share']								=	WPSL_ROOT_URL . 'templates/'.$dir.'/'.$id.'/share.tpl';
	$return['follow']								=	WPSL_ROOT_URL . 'templates/'.$dir.'/'.$id.'/follow.tpl';
	$return['email']								=	WPSL_ROOT_URL . 'templates/'.$dir.'/'.$id.'/email.tpl';
	$return['template_uri']					=	WPSL_ROOT_URL . 'templates/'.$dir.'/'.$id.'/';

	# Fix dir needs it's space
	$conf_file	= WPSL_ROOT_DIR . 'templates/'.$dir.'/'.str_replace('%20', ' ', $id).'/template_config.ini';
	if( file_exists($conf_file) ){
		$return['config'] = $conf_file;
	}

	return $return;

}

/**
 * Get all forms name of CF7
 *
 * @return array|bool Returns array of forms or false if CF7 is not installed
 */
function wpsl_get_cf7_forms(){

	if( ! wpsl_cf7_installed() )
		return false;

	$forms			=	array();
	$post_type	=	WPCF7_ContactForm::post_type;
	$forms_arr	=	get_posts(array(
		'post_type'				=> $post_type,
		'posts_per_page'	=> -1
	));

	foreach( $forms_arr as $form ){
		$forms[$form->ID]	=	$form->post_title;
	}

	return $forms;

}

/**
 * Give label for widget type
 */
function wpsl_label_widget_type( $widget_post_type ){

	$widget_type_ref		=	array(
		'stu_widgets'				=>	'Share to Unlock',
		'ftu_widgets'				=>	'Follow to Unlock',
		'etu_widgets'				=>	'Email to Unlock'
	);

	if( array_key_exists( $widget_post_type, $widget_type_ref ) )
		return $widget_type_ref[$widget_post_type];

	return FALSE;

}

/**
 * Get shortcode of widget by ID
 */
function wpsl_widget_shortcode( $widget_id ){

	if( $widget_id > 0 ){

		$widget_type		=	get_post_type($widget_id);

		switch( $widget_type ){

			case 'stu_widgets':
			case 'ftu_widgets':
			case 'etu_widgets':
				return '[wpsl_locker id="'.$widget_id.'"][/wpsl_locker]';
			break;

		}

	}

	return 'Something went wrong.';

}

/**
 * Get template content
 */
function wpsl_locker_widget_preview_html( $template_id, $type='email' ){

	return wpsl_locker_widget_html( $template_id, $type, true );

}

/**
 * Get template content
 */
function wpsl_locker_widget_html( $template_id, $type='email', $preview=FALSE, $locker_id=0 ){

	$post_id = (empty($_GET['post']) ? '' : sanitize_text_field($_GET['post']));

	if( $locker_id == 0 && get_the_ID() > 0 ){
		$locker_id = get_the_ID();
	}elseif( $locker_id == 0 && $post_id > 0 ){
		$locker_id = $post_id;
	}

	if( $template_id == '' )
		return "No Template Selected.";


	if( $type != 'email' && $type != 'follow' && $type != 'share' )
		return false;

	$template				=	wpsl_fw_template( $template_id, 'lockers' );

	if( $type == 'follow' ){
		$demo_social_keys		=	'<a href="javascript:;" id="wpsl_instagram_follow" class="key_a instagram_follow">Follow</a><a href="javascript:;" id="wpsl_youtube_subscribe" class="key_a youtube_subscribe">Subscribe</a><a href="javascript:;" id="wpsl_twitter_follow" class="key_a twitter_follow">Follow</a>';
	}else{
		$demo_social_keys		=	'<a href="javascript:;" id="wpsl_facebook_share" class="key_a facebook_share">Share</a><a href="javascript:;" id="wpsl_twitter_tweet" class="key_a twitter_tweet">Tweet</a>';
	}

	if( wp_doing_ajax() ){
		$return =		'<link rel="stylesheet" type="text/css" href="'.esc_url($template['css']).'">';
	}else{
		wp_enqueue_style('wpsl_cnc_temp_css_'.$locker_id, $template['css']);
	}

	if( $preview ){

		// $return .=	str_replace( array(
		// 	'%locker_header%',
		// 	'%locker_message%',
		// 	'%hidden_fields%',
		// 	'%soical_keys%',
		// 	'%submit_label%',
		// 	'%floating_cta_label%',
		// 	'" required'
		// ), array(
		// 	"Demo Widget Title",
		// 	"This is demo description of how it will be visible on your website.",
		// 	'<input type="text" required class="wpsl_text_input wpsl_customizer_textbox" name="first_name" placeholder="Your Name" />',
		// 	$demo_social_keys,
		// 	'Sign Up!',
		// 	'Get Capture and Convert for your WordPress Website',
		// 	'" '
		// ), $template_cont );

		$response	=	wp_remote_get( esc_url_raw( $template[$type].'-preview'), array(
			'sslverify'	=> false
		) );

		$response_code		= wp_remote_retrieve_response_code( $response );
		$response_message	= wp_remote_retrieve_response_message( $response );

		if( 200 != $response_code && ! empty( $response_message ) ){
			$return .=	'CNC: ' . $response_code . ': ' . $response_message;
		}elseif( 200 != $response_code ){
			$return .=	'CNC: Something went wrong.';
		}else{

			$return .=	 str_replace(
				array(
					'%tmp_url%',
					'%presets_url%'
				),
				array(
					dirname( $template[$type] ),
					WPSL_ROOT_URL . 'assets/images/presets/'
				),
				wp_remote_retrieve_body( $response )
			);

		}

		$return .=	 '<!-- Retrieved: ' . esc_url($template[$type]) . ' -->';

		$return .=	 '<br /><p class="wpsl_preview_cta"><a href="http://captureandconvert.io/" target="_blank">Remove Powered by?</a></p>';

	}else{

		$response	=	wp_remote_get( esc_url_raw( $template[$type]), array(
			'sslverify'	=> false
		) );

		$response_code		= wp_remote_retrieve_response_code( $response );
		$response_message	= wp_remote_retrieve_response_message( $response );

		if( 200 != $response_code && ! empty( $response_message ) ){
			$return .=	'CNC: ' . $response_code . ': ' . $response_message;
		}elseif( 200 != $response_code ){
			$return .=	'CNC: Something went wrong.';
		}else{
			$return .=	wp_remote_retrieve_body( $response );
		}

	}

	$return	=	str_replace( 'class="wpsl_unlock_form"', 'class="wpsl_unlock_form" data-uniqid="'.$template_id.'"', $return );

	$powered_by_style		=	get_post_meta( $locker_id, 'powered_by_style', true );
	$powered_by_text		=	get_post_meta( $locker_id, 'powered_by_text', true );
	$powered_by					=	'';

	$powered_by		=	'<p data-theID="'.$locker_id.'" class="wpsl_credit '.$powered_by_style.'">Powered by <a href="http://captureandconvert.io/" target="_blank">Capture and Convert</a></p></div>';

	if( $powered_by && $type != 'floating_widget' ){
		$return	=	preg_replace( '/<\/div>(?!.*<\/div>)/s', $powered_by, utf8_encode($return) );
	}elseif( $powered_by ){
		$return	=	str_replace( '%credits%', $powered_by, utf8_encode($return) );
	}

	// Make sure we're not leaving %credits% as is
	$return	=	str_replace( '%credits%', '', utf8_encode($return) );

	return $return;

}


/**
 * Get Locker
 */
function wpsl_get_locker( $lockerID ){

	$lockerID	=	absint($lockerID);
	$locker		=	get_post( $lockerID );

	if( $locker === NULL )
		return NULL;

	$widget_type			=	wpsl_get_widget_type( $lockerID );

	if( $widget_type === FALSE )
		return FALSE;

	$global_heading		=	get_option( 'wpsl_lock_title' );
	$global_desc			=	get_option( 'wpsl_lock_description' );

	$locker_heading		=	get_post_meta( $lockerID, 'locker_header', true );
	$locker_desc			=	get_post_meta( $lockerID, 'locker_message', true );

	$submit_label			=	get_post_meta( $lockerID, 'locker_submit_label', true );

	$heading					=	( $locker_heading ? $locker_heading : $global_heading );
	$description			=	( $locker_desc ? $locker_desc : $global_desc );

	$template					=	get_post_meta( $lockerID, 'locker_widget_template', true );
	$blurr						=	get_post_meta( $lockerID, 'blur_hidden_text', true );

	return array(
		'heading'				=>	$heading,
		'description'		=>	$description,
		'template'			=>	$template,
		'widget_type'		=>	$widget_type,
		'blurred'				=>	$blurr == 'on',
		'submit_label'	=>	$submit_label
	);

}


/**
 * Get Lockers array for different types
 */
function wpsl_list_lockers_templates( $type='email' ){

	if( $type != 'email' && $type != 'share' && $type != 'follow' )
		return;

	$templates	=	array();

	// NOTE: Damn Custom sorting at this scale.
	$templates	=	array(
		'Basic',
		'Simple Light',
		'Simple Dark',
		'Flat',
		'ImageBG',
		'Clean',
		'Material',
		'ImageBG2',
		'Ions',
		'SocialConfetti',
		'LavaLamp',
		'Space',
		'ColorBlock',
		'Web20',
		'LetterHead',
		'BlankCanvas',
		'PopOut',
		'BlueMarlin'
	);

	// foreach( glob(WPSL_ROOT_DIR . 'templates/lockers/*' , GLOB_ONLYDIR) as $dir ){
	//
	// 	$template_id		=	basename($dir);
	//
	// 	if( file_exists( WPSL_ROOT_DIR . 'templates/lockers/' . $template_id . '/' . $type . '.tpl' ) ){
	// 		$templates[]		=	$template_id;
	// 	}
	//
	// }

	return array_combine( $templates, $templates );

}

/**
 * Get Widget Type
 *
 * @param	int	$widget_id	Widget ID
 *
 * @return Wdget Type or FALSE
 */
function wpsl_get_widget_type( $widget_id ){

	$widget_id	=	intval($widget_id);

	switch( get_post_type( $widget_id )){

		case 'stu_widgets':
			return 'share';
		break;

		case 'ftu_widgets':
			return 'follow';
		break;

		case 'etu_widgets':
			return 'email';
		break;

	}

	return FALSE;

}

/**
 * Template Changer HTML
 *
 * @param string $type Type of widget
 * @return string
 */
function wpsl_template_changer_html( $type ){

	$current_post =	(empty($_GET['post']) ? '' : sanitize_text_field($_GET['post']));
	
	$fst	=	true;
	$tn		=	get_post_meta( $current_post, 'locker_widget_template', true );
	$cdt	=	get_post_meta( $current_post, 'wpsl_customized_data' );
	$cd		=	$cdt[0];
	$ret	=	'<p>Start with one of our pre-designed forms and customize to your liking. Or, build your own from scratch.</p>
	<input type="hidden" name="locker_widget_template" id="locker_widget_template" value="' . $tn . '" />';

	foreach( wpsl_list_lockers_templates( $type ) as $template ){

		$ss	=	WPSL_ROOT_URL . 'assets/images/no-preview.jpg';

		if( file_exists( WPSL_ROOT_DIR . 'templates/lockers/' . $template . '/' . $type . '-screenshot.jpg' ) ){
			$ss	=	WPSL_ROOT_URL . 'templates/lockers/' . $template . '/' . $type . '-screenshot.jpg';
		}

		if( $tn == $template ){
			$ret	.=	'<script type="text/javascript"> jQuery(document).ready(function(){ wpsl_show_hide_appliesonlyto(\'' . $template . '\'); }); </script>';
		}

		if( $fst && ! $tn && ( $current_post == '' ) ){
			$ret	.=	'<script type="text/javascript"> jQuery(document).ready(function(){ wpsl_preview_admin_template(\'' . $template . '\', \'' . $type . '\'); wpsl_template_preset(\'' . $type . '\', \'' . $template . '\'); }); </script>';
			$fst	=	false;
		}

		// TODO: jQuery(\'#wpsl_preview_container\').append(\'"'.addslashes( wpsl_generate_customizer_css( $cd )).'"\');

		$is_freetemps = in_array($template, array('Basic', 'Simple Light', 'Simple Dark'));
		$ret	.=	'
		<div class="wpsl_temp_to_sel' . ( $tn == $template ? ' selected' : '' ) . ( $is_freetemps ? '' : ' wpsl_premium_only') . '">
			<a href="javascript:;" onclick="'.
			(
				$is_freetemps
			?
				'wpsl_show_hide_appliesonlyto(\'' . $template . '\'); jQuery(\'.wpsl_temp_to_sel\').removeClass(\'selected\'); jQuery(this).parent().addClass(\'selected\'); jQuery(\'#locker_widget_template\').val(\''.$template.'\'); wpsl_preview_admin_template(\'' . $template . '\', \'' . $type . '\'); wpsl_template_preset(\'' . $type . '\', \'' . $template . '\')'
			: ' // alert(\'Only available in premium version\');' ) . '">
				<img src="' . $ss . '" title="' . $template . '" />
			</a>
		</div>';

	}

	return $ret;

}

/**
 * Apply customizer settings
 */
function wpslcnc_apply_customizer_settings( $customizer_data, $type)
{

	$custmzrdt		=	wpsl_generate_customizer_css( $customizer_data );

	$return	=	'';

	$return	.=	'<script type="text/javascript">';

		$return	.=	"jQuery('#wpsl_preview_container .wpslcnc_preview_styles').remove();";
		$return	.=	"jQuery('#wpsl_preview_container').append('".addslashes($custmzrdt)."');";

		$icon_sl						=	$customizer_data['wpsl_email_locker_icon']['icon_slug'];
		$use_custom_img			=	$customizer_data['wpsl_email_locker_icon']['use_custom_img'];
		$custom_image_icon	=	$customizer_data['wpsl_email_locker_icon']['custom_image_icon'];
		$header_img_url			=	$customizer_data['wpsl_locker_header_img']['url'];
		$bg_img_url					=	$customizer_data['wpsl_customizer_primary_bg_img']['url'];

		if( $bg_img_url ){

			$return	.=	'jQuery(window).on("load", function(){';
				$return	.=	'jQuery(".wpsl_customizer_bg_img").css( "background-image", "url(\''.esc_url($bg_img_url).'\')" ).css( "background-size", "cover" );';
			$return	.=	'});';

		}

		if( $header_img_url != '' ){

			$return	.=	'jQuery(window).on("load", function(){';
				$return	.=	'jQuery(\'.wpsl_header_img\').html( \'<img src="'.esc_url($header_img_url).'" />\' );';
			$return	.=	'});';

		}

		if( $icon_sl != "0" && $icon_sl != "" && $use_custom_img != 'on' ){

			$return	.=	'jQuery(window).on("load", function(){';
				$return	.=	'var icon_hhh	=	jQuery("#wpsl_preview_container .wpsl_email_locker_icon");';
				$return	.=	'icon_hhh.removeAttr("class");';
				$return	.=	'icon_hhh.empty();';
				$return	.=	'icon_hhh.addClass("wpsl_email_locker_icon dashicons '.$icon_sl.'");';
			$return	.=	'});';

		}

		if( $use_custom_img == 'on' ){

			$return	.=	'jQuery(window).on("load", function(){';
				$return	.=	'var icon_hhh	=	jQuery("#wpsl_preview_container .wpsl_email_locker_icon");';
				$return	.=	'icon_hhh.removeAttr("class");';
				$return	.=	'icon_hhh.parent(\'.wpsl_left_icon\').css( "background", "none" ).css("padding", "0");';
				$return	.=	'icon_hhh.addClass("wpsl_email_locker_icon");';
				$return	.=	'icon_hhh.html(\'<img src="' . esc_url($custom_image_icon) . '" />\'); console.log(icon_hhh); '; // TODO: Not updating image when openeing a published locker
			$return	.=	'});';

		}


	$return	.=	'</script>';

	return $return;

}

/**
 * Preview Customizer html
 *
 * TODO: Needs some cleanup and hooks/filters to add more fields for customizer
 *
 * @param int    $step Number of Step/part of customizer
 * @param string $type Type of widget
 *
 * @return string
 */
function wpsl_locker_widget_preview_customizer( $step, $type ){

	global $wpsl_cnc_gfonts;

	$current_post = (empty($_GET['post']) ? '' : sanitize_text_field($_GET['post']));

	$customizer_data_ar	=	get_post_meta( $current_post, 'wpsl_customized_data' );
	
	$customizer_data	=	$customizer_data_ar[0];

	$icon_font_sizes	=	array(
		'9px',
		'12px',
		'14px',
		'16px',
		'18px',
		'22px',
		'24px',
		'28px',
		'36px',
		'48px',
		'60px',
		'72px',
		'96px',
		'130px',
		'150px'
	);

	$font_sizes	=	array(
		'9px',
		'12px',
		'14px',
		'16px',
		'18px',
		'20px',
		'22px',
		'24px',
		'28px',
		'30px',
		'32px',
		'34px',
		'36px',
		'43px',
		'44px',
		'45px',
		'48px',
		'50px',
		'53px',
		'60px',
		'72px',
		'96px',
		'130px',
		'150px'
	);

	$font_families			=	array_keys($wpsl_cnc_gfonts);

	$dashicons	=	array( '&#xf333;' => 'dashicons-menu', '&#xf319;' => 'dashicons-admin-site', '&#xf226;' => 'dashicons-dashboard', '&#xf109;' => 'dashicons-admin-post', '&#xf104;' => 'dashicons-admin-media', '&#xf103;' => 'dashicons-admin-links', '&#xf105;' => 'dashicons-admin-page', '&#xf101;' => 'dashicons-admin-comments', '&#xf100;' => 'dashicons-admin-appearance', '&#xf106;' => 'dashicons-admin-plugins', '&#xf110;' => 'dashicons-admin-users', '&#xf107;' => 'dashicons-admin-tools', '&#xf108;' => 'dashicons-admin-settings', '&#xf112;' => 'dashicons-admin-network', '&#xf102;' => 'dashicons-admin-home', '&#xf111;' => 'dashicons-admin-generic', '&#xf148;' => 'dashicons-admin-collapse', '&#xf536;' => 'dashicons-filter', '&#xf540;' => 'dashicons-admin-customizer', '&#xf541;' => 'dashicons-admin-multisite', '&#xf119;' => 'dashicons-welcome-write-blog', '&#xf133;' => 'dashicons-welcome-add-page', '&#xf115;' => 'dashicons-welcome-view-site', '&#xf116;' => 'dashicons-welcome-widgets-menus', '&#xf117;' => 'dashicons-welcome-comments', '&#xf118;' => 'dashicons-welcome-learn-more', '&#xf123;' => 'dashicons-format-aside', '&#xf128;' => 'dashicons-format-image', '&#xf161;' => 'dashicons-format-gallery', '&#xf126;' => 'dashicons-format-video', '&#xf130;' => 'dashicons-format-status', '&#xf122;' => 'dashicons-format-quote', '&#xf125;' => 'dashicons-format-chat', '&#xf127;' => 'dashicons-format-audio', '&#xf306;' => 'dashicons-camera', '&#xf232;' => 'dashicons-images-alt', '&#xf233;' => 'dashicons-images-alt2', '&#xf234;' => 'dashicons-video-alt', '&#xf235;' => 'dashicons-video-alt2', '&#xf236;' => 'dashicons-video-alt3', '&#xf501;' => 'dashicons-media-archive', '&#xf500;' => 'dashicons-media-audio', '&#xf499;' => 'dashicons-media-code', '&#xf498;' => 'dashicons-media-default', '&#xf497;' => 'dashicons-media-document', '&#xf496;' => 'dashicons-media-interactive', '&#xf495;' => 'dashicons-media-spreadsheet', '&#xf491;' => 'dashicons-media-text', '&#xf490;' => 'dashicons-media-video', '&#xf492;' => 'dashicons-playlist-audio', '&#xf493;' => 'dashicons-playlist-video', '&#xf522;' => 'dashicons-controls-play', '&#xf523;' => 'dashicons-controls-pause', '&#xf519;' => 'dashicons-controls-forward', '&#xf517;' => 'dashicons-controls-skipforward', '&#xf518;' => 'dashicons-controls-back', '&#xf516;' => 'dashicons-controls-skipback', '&#xf515;' => 'dashicons-controls-repeat', '&#xf521;' => 'dashicons-controls-volumeon', '&#xf520;' => 'dashicons-controls-volumeoff', '&#xf165;' => 'dashicons-image-crop', '&#xf531;' => 'dashicons-image-rotate', '&#xf166;' => 'dashicons-image-rotate-left', '&#xf167;' => 'dashicons-image-rotate-right', '&#xf168;' => 'dashicons-image-flip-vertical', '&#xf169;' => 'dashicons-image-flip-horizontal', '&#xf533;' => 'dashicons-image-filter', '&#xf171;' => 'dashicons-undo', '&#xf172;' => 'dashicons-redo', '&#xf200;' => 'dashicons-editor-bold', '&#xf201;' => 'dashicons-editor-italic', '&#xf203;' => 'dashicons-editor-ul', '&#xf204;' => 'dashicons-editor-ol', '&#xf205;' => 'dashicons-editor-quote', '&#xf206;' => 'dashicons-editor-alignleft', '&#xf207;' => 'dashicons-editor-aligncenter', '&#xf208;' => 'dashicons-editor-alignright', '&#xf209;' => 'dashicons-editor-insertmore', '&#xf210;' => 'dashicons-editor-spellcheck', '&#xf211;' => 'dashicons-editor-expand', '&#xf506;' => 'dashicons-editor-contract', '&#xf212;' => 'dashicons-editor-kitchensink', '&#xf213;' => 'dashicons-editor-underline', '&#xf214;' => 'dashicons-editor-justify', '&#xf215;' => 'dashicons-editor-textcolor', '&#xf216;' => 'dashicons-editor-paste-word', '&#xf217;' => 'dashicons-editor-paste-text', '&#xf218;' => 'dashicons-editor-removeformatting', '&#xf219;' => 'dashicons-editor-video', '&#xf220;' => 'dashicons-editor-customchar', '&#xf221;' => 'dashicons-editor-outdent', '&#xf222;' => 'dashicons-editor-indent', '&#xf223;' => 'dashicons-editor-help', '&#xf224;' => 'dashicons-editor-strikethrough', '&#xf225;' => 'dashicons-editor-unlink', '&#xf320;' => 'dashicons-editor-rtl', '&#xf474;' => 'dashicons-editor-break', '&#xf475;' => 'dashicons-editor-code', '&#xf476;' => 'dashicons-editor-paragraph', '&#xf535;' => 'dashicons-editor-table', '&#xf135;' => 'dashicons-align-left', '&#xf136;' => 'dashicons-align-right', '&#xf134;' => 'dashicons-align-center', '&#xf138;' => 'dashicons-align-none', '&#xf160;' => 'dashicons-lock', '&#xf528;' => 'dashicons-unlock', '&#xf145;' => 'dashicons-calendar', '&#xf508;' => 'dashicons-calendar-alt', '&#xf177;' => 'dashicons-visibility', '&#xf530;' => 'dashicons-hidden', '&#xf173;' => 'dashicons-post-status', '&#xf464;' => 'dashicons-edit', '&#xf182;' => 'dashicons-trash', '&#xf537;' => 'dashicons-sticky', '&#xf504;' => 'dashicons-external', '&#xf142;' => 'dashicons-arrow-up', '&#xf140;' => 'dashicons-arrow-down', '&#xf139;' => 'dashicons-arrow-right', '&#xf141;' => 'dashicons-arrow-left', '&#xf342;' => 'dashicons-arrow-up-alt', '&#xf346;' => 'dashicons-arrow-down-alt', '&#xf344;' => 'dashicons-arrow-right-alt', '&#xf340;' => 'dashicons-arrow-left-alt', '&#xf343;' => 'dashicons-arrow-up-alt2', '&#xf347;' => 'dashicons-arrow-down-alt2', '&#xf345;' => 'dashicons-arrow-right-alt2', '&#xf341;' => 'dashicons-arrow-left-alt2', '&#xf156;' => 'dashicons-sort', '&#xf229;' => 'dashicons-leftright', '&#xf503;' => 'dashicons-randomize', '&#xf163;' => 'dashicons-list-view', '&#xf164;' => 'dashicons-exerpt-view', '&#xf509;' => 'dashicons-grid-view', '&#xf545;' => 'dashicons-move', '&#xf237;' => 'dashicons-share', '&#xf240;' => 'dashicons-share-alt', '&#xf242;' => 'dashicons-share-alt2', '&#xf301;' => 'dashicons-twitter', '&#xf303;' => 'dashicons-rss', '&#xf465;' => 'dashicons-email', '&#xf466;' => 'dashicons-email-alt', '&#xf304;' => 'dashicons-facebook', '&#xf305;' => 'dashicons-facebook-alt', '&#xf462;' => 'dashicons-googleplus', '&#xf325;' => 'dashicons-networking', '&#xf308;' => 'dashicons-hammer', '&#xf309;' => 'dashicons-art', '&#xf310;' => 'dashicons-migrate', '&#xf311;' => 'dashicons-performance', '&#xf483;' => 'dashicons-universal-access', '&#xf507;' => 'dashicons-universal-access-alt', '&#xf486;' => 'dashicons-tickets', '&#xf484;' => 'dashicons-nametag', '&#xf481;' => 'dashicons-clipboard', '&#xf487;' => 'dashicons-heart', '&#xf488;' => 'dashicons-megaphone', '&#xf489;' => 'dashicons-schedule', '&#xf120;' => 'dashicons-wordpress', '&#xf324;' => 'dashicons-wordpress-alt', '&#xf157;' => 'dashicons-pressthis', '&#xf463;' => 'dashicons-update', '&#xf180;' => 'dashicons-screenoptions', '&#xf348;' => 'dashicons-info', '&#xf174;' => 'dashicons-cart', '&#xf175;' => 'dashicons-feedback', '&#xf176;' => 'dashicons-cloud', '&#xf326;' => 'dashicons-translation', '&#xf323;' => 'dashicons-tag', '&#xf318;' => 'dashicons-category', '&#xf480;' => 'dashicons-archive', '&#xf479;' => 'dashicons-tagcloud', '&#xf478;' => 'dashicons-text', '&#xf147;' => 'dashicons-yes', '&#xf158;' => 'dashicons-no', '&#xf335;' => 'dashicons-no-alt', '&#xf132;' => 'dashicons-plus', '&#xf502;' => 'dashicons-plus-alt', '&#xf460;' => 'dashicons-minus', '&#xf153;' => 'dashicons-dismiss', '&#xf159;' => 'dashicons-marker', '&#xf155;' => 'dashicons-star-filled', '&#xf459;' => 'dashicons-star-half', '&#xf154;' => 'dashicons-star-empty', '&#xf227;' => 'dashicons-flag', '&#xf534;' => 'dashicons-warning', '&#xf230;' => 'dashicons-location', '&#xf231;' => 'dashicons-location-alt', '&#xf178;' => 'dashicons-vault', '&#xf332;' => 'dashicons-shield', '&#xf334;' => 'dashicons-shield-alt', '&#xf468;' => 'dashicons-sos', '&#xf179;' => 'dashicons-search', '&#xf181;' => 'dashicons-slides', '&#xf183;' => 'dashicons-analytics', '&#xf184;' => 'dashicons-chart-pie', '&#xf185;' => 'dashicons-chart-bar', '&#xf238;' => 'dashicons-chart-line', '&#xf239;' => 'dashicons-chart-area', '&#xf307;' => 'dashicons-groups', '&#xf338;' => 'dashicons-businessman', '&#xf336;' => 'dashicons-id', '&#xf337;' => 'dashicons-id-alt', '&#xf312;' => 'dashicons-products', '&#xf313;' => 'dashicons-awards', '&#xf314;' => 'dashicons-forms', '&#xf473;' => 'dashicons-testimonial', '&#xf322;' => 'dashicons-portfolio', '&#xf330;' => 'dashicons-book', '&#xf331;' => 'dashicons-book-alt', '&#xf316;' => 'dashicons-download', '&#xf317;' => 'dashicons-upload', '&#xf321;' => 'dashicons-backup', '&#xf469;' => 'dashicons-clock', '&#xf339;' => 'dashicons-lightbulb', '&#xf482;' => 'dashicons-microphone', '&#xf472;' => 'dashicons-desktop', '&#xf547;' => 'dashicons-laptop', '&#xf471;' => 'dashicons-tablet', '&#xf470;' => 'dashicons-smartphone', '&#xf525;' => 'dashicons-phone', '&#xf510;' => 'dashicons-index-card', '&#xf511;' => 'dashicons-carrot', '&#xf512;' => 'dashicons-building', '&#xf513;' => 'dashicons-store', '&#xf514;' => 'dashicons-album', '&#xf527;' => 'dashicons-palmtree', '&#xf524;' => 'dashicons-tickets-alt', '&#xf526;' => 'dashicons-money', '&#xf328;' => 'dashicons-smiley', '&#xf529;' => 'dashicons-thumbs-up', '&#xf542;' => 'dashicons-thumbs-down', '&#xf538;' => 'dashicons-layout', '&#xf546;' => 'dashicons-paperclip' );

	$return	=	wpslcnc_apply_customizer_settings( $customizer_data, $type);

	if( $type == 'email' ){

		if( $step == '3' ){

			$return	.=	'<p>Start with one of our pre-designed forms and customize to your liking. Or, build your own from scratch.</p> <br />';

			$return	.=	'<input type="hidden" name="form_lines" id="wpsl_form_lines" value="1">';

			$return	.=	'<div id="wpsl_preset_changer">';
				$return	.=	'<div><a href="javascript:;" onclick="wpsl_preset( \'email\', \'1\' )"><img src="' . WPSL_ROOT_URL . 'assets/images/presets/email.jpg" title="One Line, Only Email"></a></div>';
				$return	.=	'<div><a href="javascript:;" onclick="wpsl_preset( \'email\', \'2\' )"><img src="' . WPSL_ROOT_URL . 'assets/images/presets/email-2.jpg" title="One Line, Both email & Name"></a></div>';
				$return	.=	'<div><a href="javascript:;" onclick="wpsl_preset( \'email\', \'3\' )"><img src="' . WPSL_ROOT_URL . 'assets/images/presets/email-3.jpg" title="Two Lines, Both email & Name"></a></div>';
			$return	.=	'</div>';

		}

		if( $step == '2' ){

			$return	.=	'<div class="wpsl_customizer_section">';

			$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Basic|Simple Light|Simple Dark|Flat|ImageBG|Clean|PopOut">';
				$return	.=	'<span class="wpsl_disabler"></span>';

				$return	.=	'<strong>';
					$use_custom_img	=	$customizer_data['wpsl_email_locker_icon']['use_custom_img'];
					$return	.=	'Icon: <br />';
					$return	.=	'<small>(Only applies to some templates):</small> <br />';
					$return	.=	'<label for="icon_image_togl"><input id="icon_image_togl" type="checkbox" class="wpsl_icon_img_toggler" name="wpsl_customized_data[wpsl_email_locker_icon][use_custom_img]" ' . ( $use_custom_img == 'on' ? 'checked' : '' ) . ' />Use Custom Image</label>';
				$return	.=	'</strong>';

				$return	.=	'<div class="wpsl_dashicon_icon" style="' . ( $use_custom_img != 'on' ? '' : 'display: none;' ) . '">';

					$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_email_locker_icon" name="wpsl_customized_data[wpsl_email_locker_icon][font-size]" value="' . $customizer_data['wpsl_email_locker_icon']['font-size'] . '" id="wpsl_customized_data_email_locker_icon_fs">';

						$fs	=	$customizer_data['wpsl_email_locker_icon']['font-size'];

						foreach( $icon_font_sizes as $size ){
							$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select id="wpsl_widget_icon" name="wpsl_customized_data[wpsl_email_locker_icon][icon_slug]">';
						$return	.=	'<option value="0">Please Select</option>';

						foreach( $dashicons as $ccc=>$icon ){
							$is	=	$customizer_data['wpsl_email_locker_icon']['icon_slug'];
							$return	.= '<option value="'.$icon.'" '.( $is == $icon ? 'selected' : '' ).'>'.ucwords(str_replace( array('-', 'dashicons'), ' ', $icon )).' '.$ccc.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_email_locker_icon" name="wpsl_customized_data[wpsl_email_locker_icon][color]" value="' . $customizer_data['wpsl_email_locker_icon']['color'] . '" id="wpsl_customized_data_email_locker_icon_color">';

				$return	.=	'</div>';

				$return	.=	'<span class="wpsl_custom_img_icon" style="' . ( $use_custom_img != 'on' ? 'display: none;' : '' ) . '">';

					$custom_image_icon = $customizer_data['wpsl_email_locker_icon']['custom_image_icon'];

					$return	.=	'<input type="hidden" name="wpsl_customized_data[wpsl_email_locker_icon][custom_image_icon]" id="custom_image_icon" value="' . $custom_image_icon . '" class="regular-text" />';
					$return	.=	'<small>(Sqaure, transparent background png, not more than 72x72)</small><br />';
					$return	.=	'<input type="button" class="button-primary" value="Select Icon" id="wpsl_custom_img_btn" />';

				$return	.=	'</span>';

			$return	.=	'</div>';

				$return	.=	'<br /><br />';

				$use_gradient	=	$customizer_data['wpsl_left_icon']['use_gradient'];

				$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Simple Light|Simple Dark">';
					$return	.=	'<span class="wpsl_disabler"></span>';

					$return	.=	'<strong>';
						$return	.=	'Background <br />';
						$return	.=	'<small>(Only applies to some templates):</small> <br />';
						$return	.=	'<label for="icon_bg_grad_togl"><input id="icon_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_left_icon][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
					$return	.=	'</strong>';

					$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_left_icon" data-type="background" name="wpsl_customized_data[wpsl_left_icon][background]" id="wpsl_customized_data_left_icon_bg" value="' . $customizer_data['wpsl_left_icon']['background'] . '">';
					$return	.=	'</span>';

					$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_left_icon" data-type="gradient_a" name="wpsl_customized_data[wpsl_left_icon][gradient_a]" value="' . $customizer_data['wpsl_left_icon']['gradient_a'] . '" id="wpsl_customized_data_left_icon_bga">';
						$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_left_icon" data-type="gradient_b" name="wpsl_customized_data[wpsl_left_icon][gradient_b]" value="' . $customizer_data['wpsl_left_icon']['gradient_b'] . '" id="wpsl_customized_data_left_icon_bgb">';
					$return	.=	'</span>';

				$return	.=	'</div>';

			$return	.=	'</div>';

			$return	.=	'<div class="wpsl_customizer_section">';

			$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Flat">';
				$return	.=	'<span class="wpsl_disabler"></span>';

				$return	.=	'<strong>';
					$return	.=	'Header Image: <br />';
					$return	.=	'<small>Only applies to some templates</small><br />';
					$return	.=	'<small>(Wide, at least 780x230)</small>';
				$return	.=	'</strong>';

				$url = $customizer_data['wpsl_locker_header_img']['url'];

				$return	.=	'<input type="hidden" name="wpsl_customized_data[wpsl_locker_header_img][url]" id="wpsl_header_img" value="' . $url . '" class="regular-text" />';
				$return	.=	'<input type="button" class="button-primary" value="Select Image" id="wpsl_header_img_btn" />';

			$return	.=	'</div> ';
			$return	.=	'</div>';

		}

		if( $step == '1' ){

			$return	.=	'<div class="wpsl_customizer_section">';
				$return	.=	'<strong>Headline </strong>';
				$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_customizer_heading" name="wpsl_customized_data[wpsl_customizer_heading][font-size]" value="' . $customizer_data['wpsl_customizer_heading']['font-size'] . '" id="wpsl_customized_data_heading_fs">';

					$fs	=	$customizer_data['wpsl_customizer_heading']['font-size'];

					foreach( $font_sizes as $size ){
						$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<div class="wpsl_font_family_style_cont">';

					$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".wpsl_customizer_heading" name="wpsl_customized_data[wpsl_customizer_heading][font-family]" id="wpsl_customized_data_heading_ff">';
						$return	.=	'<option value="0">Default Font of Website</option>';

						$ff	=	$customizer_data['wpsl_customizer_heading']['font-family'];

						foreach( $font_families as $font ){
							$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".wpsl_customizer_heading"
												name="wpsl_customized_data[wpsl_customizer_heading][wpsl-font-var]"
												id="wpsl_customizer_heading_fv"
												data-oldval="'.$customizer_data['wpsl_customizer_heading']['wpsl-font-var'].'">';
					$return	.=	'</select>';

				$return	.=	'</div>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_heading" name="wpsl_customized_data[wpsl_customizer_heading][color]" value="' . $customizer_data['wpsl_customizer_heading']['color'] . '" id="wpsl_customized_data_heading_color">';

			$return	.=	'</div>';

			$return	.=	'<div class="wpsl_customizer_section">';
				$return	.=	'<strong>Message </strong>';
				$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_customizer_desc" name="wpsl_customized_data[wpsl_customizer_desc][font-size]" id="wpsl_customized_data_desc_fs">';

					$fs	=	$customizer_data['wpsl_customizer_desc']['font-size'];

					foreach( $font_sizes as $size ){
						$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<div class="wpsl_font_family_style_cont">';

					$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".wpsl_customizer_desc" name="wpsl_customized_data[wpsl_customizer_desc][font-family]" id="wpsl_customized_data_desc_ff">';
						$return	.=	'<option value="0">Default Font of Website</option>';

						$ff	=	$customizer_data['wpsl_customizer_desc']['font-family'];

						foreach( $font_families as $font ){
							$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".wpsl_customizer_desc"
												name="wpsl_customized_data[wpsl_customizer_desc][wpsl-font-var]"
												id="wpsl_customizer_desc_fv"
												data-oldval="'.$customizer_data['wpsl_customizer_desc']['wpsl-font-var'].'">';
					$return	.=	'</select>';

				$return	.=	'</div>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_desc" name="wpsl_customized_data[wpsl_customizer_desc][color]" value="' . $customizer_data['wpsl_customizer_desc']['color'] . '" id="wpsl_customized_data_desc_color">';

			$return	.=	'</div>';

		}

		if( $step == '2' ){

			$return	.=	'<div class="wpsl_customizer_section">';

				$use_gradient	=	$customizer_data['wpsl_customizer_primary_bg']['use_gradient'];

				$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Basic|Simple Light|Simple Dark|Flat|Clean|Material|ColorBlock|Web20|BlankCanvas|PopOut">';
					$return	.=	'<span class="wpsl_disabler"></span>';

					$return	.=	'<strong>';
						$return	.=	'Primary Background: <br />';
						$return	.=	'<small>(Only applies to some templates):</small> <br />';
						$return	.=	'<label for="prim_bg_grad_togl"><input id="prim_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_customizer_primary_bg][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
					$return	.=	'</strong>';

					$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_primary_bg" data-type="background" name="wpsl_customized_data[wpsl_customizer_primary_bg][background]" value="' . $customizer_data['wpsl_customizer_primary_bg']['background'] . '" id="wpsl_customized_data_primary_bg_bg">';
					$return	.=	'</span>';

					$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_customizer_primary_bg" data-type="gradient_a" name="wpsl_customized_data[wpsl_customizer_primary_bg][gradient_a]" value="' . $customizer_data['wpsl_customizer_primary_bg']['gradient_a'] . '" id="wpsl_customized_data_primary_bg_bga">';
						$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_customizer_primary_bg" data-type="gradient_b" name="wpsl_customized_data[wpsl_customizer_primary_bg][gradient_b]" value="' . $customizer_data['wpsl_customizer_primary_bg']['gradient_b'] . '" id="wpsl_customized_data_primary_bg_bgb">';
					$return	.=	'</span>';

				$return	.=	'</div>';

			$return	.=	'</div>';

			$return	.=	'<div class="wpsl_customizer_section">';

			$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="ImageBG|ImageBG2">';
				$return	.=	'<span class="wpsl_disabler"></span>';

				$return	.=	'<strong>';
					$return	.=	'Background Image: <br />';
					$return	.=	'<small>(Only applies to some templates)</small><br />';
					// $return	.=	'<small>(Square image, at least 740x740)</small>';
				$return	.=	'</strong>';

				$url = $customizer_data['wpsl_customizer_primary_bg_img']['url'];

				$return	.=	'<input type="hidden" name="wpsl_customized_data[wpsl_customizer_primary_bg_img][url]" id="wpsl_bg_img" value="' . $url . '" class="regular-text" />';
				$return	.=	'<input type="button" class="button-primary" value="Select Image" id="wpsl_bg_img_btn" />';

			$return	.=	'</div> ';
			$return	.=	'</div>';

			// NOTE: Ready for trash
			// $return	.=	'<div class="wpsl_customizer_section">';
			//
			// 	$use_gradient	=	$customizer_data['wpsl_customizer_secondary_bg']['use_gradient'];
			//
			// 	$return	.=	'<strong>';
			// 		$return	.=	'Secondary Background <br />';
			// 		$return	.=	'<small>(Only applies to some templates)</small> <br />';
			// 		$return	.=	'<label for="sec_bg_grad_togl"><input id="sec_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_customizer_secondary_bg][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
			// 	$return	.=	'</strong>';
			//
			// 	$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
			// 		$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_secondary_bg" data-type="background" name="wpsl_customized_data[wpsl_customizer_secondary_bg][background]" value="' . $customizer_data['wpsl_customizer_secondary_bg']['background'] . '">';
			// 	$return	.=	'</span>';
			//
			// 	$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
			// 		$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_customizer_secondary_bg" data-type="gradient_a" name="wpsl_customized_data[wpsl_customizer_secondary_bg][gradient_a]" value="' . $customizer_data['wpsl_customizer_secondary_bg']['gradient_a'] . '">';
			// 		$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_customizer_secondary_bg" data-type="gradient_b" name="wpsl_customized_data[wpsl_customizer_secondary_bg][gradient_b]" value="' . $customizer_data['wpsl_customizer_secondary_bg']['gradient_b'] . '">';
			// 	$return	.=	'</span>';
			//
			// $return	.=	'</div>';

		}

		if( $step == '5' ){

			$return	.=	'<div class="wpsl_customizer_section">';
				$return	.=	'<strong>Text Boxes: </strong>';
				$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_customizer_textbox" name="wpsl_customized_data[wpsl_customizer_textbox][font-size]" id="wpsl_customized_data_etu_textbox_fs">';

					$fs	=	$customizer_data['wpsl_customizer_textbox']['font-size'];

					foreach( $font_sizes as $size ){
						$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<div class="wpsl_font_family_style_cont">';

					$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".wpsl_customizer_textbox" name="wpsl_customized_data[wpsl_customizer_textbox][font-family]" id="wpsl_customized_data_etu_textbox_ff">';
						$return	.=	'<option value="0">Default Font of Website</option>';

						$ff	=	$customizer_data['wpsl_customizer_textbox']['font-family'];

						foreach( $font_families as $font ){
							$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".wpsl_customizer_textbox"
												name="wpsl_customized_data[wpsl_customizer_textbox][wpsl-font-var]"
												data-oldval="'.$customizer_data['wpsl_customizer_textbox']['wpsl-font-var'].'"
												id="wpsl_customized_data_etu_textbox_fv">';
					$return	.=	'</select>';

				$return	.=	'</div>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_textbox" name="wpsl_customized_data[wpsl_customizer_textbox][color]" id="wpsl_customized_data_etu_textbox_color" value="' . $customizer_data['wpsl_customizer_textbox']['color'] . '">';

				$return	.=	'<br /><br />';

				$use_gradient	=	$customizer_data['wpsl_customizer_textbox']['use_gradient'];

				$return	.=	'<strong>';
					$return	.=	'Background <br />';
					$return	.=	'<label for="txtbx_bg_grad_togl"><input id="txtbx_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_customizer_textbox][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
				$return	.=	'</strong>';

				$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_textbox" data-type="background" name="wpsl_customized_data[wpsl_customizer_textbox][background]" id="wpsl_customized_data_etu_textbox_bg" value="' . $customizer_data['wpsl_customizer_textbox']['background'] . '">';
				$return	.=	'</span>';

				$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_customizer_textbox" data-type="gradient_a" name="wpsl_customized_data[wpsl_customizer_textbox][gradient_a]" value="' . $customizer_data['wpsl_customizer_textbox']['gradient_a'] . '" id="wpsl_customized_data_etu_textbox_bga">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_customizer_textbox" data-type="gradient_b" name="wpsl_customized_data[wpsl_customizer_textbox][gradient_b]" value="' . $customizer_data['wpsl_customizer_textbox']['gradient_b'] . '" id="wpsl_customized_data_etu_textbox_bgb">';
				$return	.=	'</span>';

				$return	.=	'<br /><br />';

				$return	.=	'<strong>Border: </strong>';

				$return	.=	'<select class="wpsl_border_width_selector" id="wpsl_email_text_border_width" name="wpsl_customized_data[wpsl_customizer_textbox][border-width]" data-appliesto=".wpsl_customizer_textbox">';

					foreach( range(0,20) as $i ){
						$is	=	$customizer_data['wpsl_customizer_textbox']['border-width'];
						$return	.= '<option value="'.$i.'px" '.( $is == $i.'px' ? 'selected' : '' ).'>'.$i.'px</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<select class="wpsl_border_style_selector" data-appliesto=".wpsl_customizer_textbox" name="wpsl_customized_data[wpsl_customizer_textbox][border-style]" id="wpsl_email_text_border_style" value="' . $customizer_data['wpsl_customizer_textbox']['border-style'] . '">';

					$bs							=	$customizer_data['wpsl_customizer_textbox']['border-style'];
					$border_styles	=	array( 'none', 'hidden', 'dotted', 'dashed', 'solid', 'double', 'groove', 'ridge', 'inset', 'outset' );

					foreach( $border_styles as $bstyle ){
						$return	.= '<option value="'.$bstyle.'" '.( $bs == $bstyle ? 'selected' : '' ).'>'.$bstyle.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_textbox" data-type="border" name="wpsl_customized_data[wpsl_customizer_textbox][border-color]" id="wpsl_customized_email_text_border_color" value="' . $customizer_data['wpsl_customizer_textbox']['border-color'] . '">';

			$return	.=	'</div>';

		}

		if( $step == '4' ){

			$return	.=	'<div class="wpsl_customizer_section">';
				$return	.=	'<strong>Submit Button: </strong>';
				$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_customizer_button" name="wpsl_customized_data[wpsl_customizer_button][font-size]" id="wpsl_customized_data_etu_button_fs">';

					$fs	=	$customizer_data['wpsl_customizer_button']['font-size'];

					foreach( $font_sizes as $size ){
						$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<div class="wpsl_font_family_style_cont">';

					$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".wpsl_customizer_button" name="wpsl_customized_data[wpsl_customizer_button][font-family]" id="wpsl_customized_data_etu_button_ff">';
						$return	.=	'<option value="0">Default Font of Website</option>';

						$ff	=	$customizer_data['wpsl_customizer_button']['font-family'];

						foreach( $font_families as $font ){
							$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".wpsl_customizer_button"
												name="wpsl_customized_data[wpsl_customizer_button][wpsl-font-var]"
												id="wpsl_customized_data_etu_button_fv"
												data-oldval="'.$customizer_data['wpsl_customizer_button']['wpsl-font-var'].'">';
					$return	.=	'</select>';

				$return	.=	'</div>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" name="wpsl_customized_data[wpsl_customizer_button][color]" id="wpsl_customized_data_etu_button_color" value="' . $customizer_data['wpsl_customizer_button']['color'] . '" data-appliesto=".wpsl_customizer_button">';

				$return	.=	'<br /><br />';

				$use_gradient	=	$customizer_data['wpsl_customizer_button']['use_gradient'];

				$return	.=	'<strong>';
					$return	.=	'Background <br />';
					$return	.=	'<label for="sbmt_btn_bg_grad_togl"><input id="sbmt_btn_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_customizer_button][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
				$return	.=	'</strong>';

				$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_button" data-type="background" name="wpsl_customized_data[wpsl_customizer_button][background]" id="wpsl_customized_data_etu_button_bg" value="' . $customizer_data['wpsl_customizer_button']['background'] . '">';
				$return	.=	'</span>';

				$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_customizer_button" data-type="gradient_a" name="wpsl_customized_data[wpsl_customizer_button][gradient_a]" id="wpsl_customized_data_etu_button_bga" value="' . $customizer_data['wpsl_customizer_button']['gradient_a'] . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_customizer_button" data-type="gradient_b" name="wpsl_customized_data[wpsl_customizer_button][gradient_b]" id="wpsl_customized_data_etu_button_bgb" value="' . $customizer_data['wpsl_customizer_button']['gradient_b'] . '">';
				$return	.=	'</span>';

			$return	.=	'</div>';

		}

	}elseif( $type == 'share' ){

		if( $step == '3' ){

			$return	.=	'<p>Start with one of our pre-designed forms and customize to your liking. Or, build your own from scratch.</p> <br />';

			$return	.=	'<div id="wpsl_preset_changer">';
				$return	.=	'<div><a href="javascript:;" onclick="wpsl_preset( \'share\', \'flat\' )"><img src="' . WPSL_ROOT_URL . 'assets/images/presets/share.jpg' . '" title="Flat Design"></a></div>';
				$return	.=	'<div><a href="javascript:;" onclick="wpsl_preset( \'share\', \'grad\' )"><img src="' . WPSL_ROOT_URL . 'assets/images/presets/share-grad.jpg' . '" title="Gradient Design"></a></div>';
				$return	.=	'<div><a href="javascript:;" onclick=""><img src="' . WPSL_ROOT_URL . 'assets/images/presets/share-custom.jpg' . '" title="Custom"></a></div>';
			$return	.=	'</div>';

		}

		if( $step == '2' ){

			$return	.=	'<div class="wpsl_customizer_section">';

			$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Basic|Simple Light|Simple Dark|Flat|ImageBG|Clean|PopOut">';
				$return	.=	'<span class="wpsl_disabler"></span>';

				$return	.=	'<strong>';
					$use_custom_img	=	$customizer_data['wpsl_email_locker_icon']['use_custom_img'];
					$return	.=	'Icon <br />';
				$return	.=	'</strong>';

				$return	.=	'<label for="icon_image_togl"><input id="icon_image_togl" type="checkbox" class="wpsl_icon_img_toggler" name="wpsl_customized_data[wpsl_email_locker_icon][use_custom_img]" ' . ( $use_custom_img == 'on' ? 'checked' : '' ) . ' />Upload custom icon</label>';

				$return	.=	'<br /><br />';

				$return	.=	'<div class="wpsl_dashicon_icon" style="' . ( $use_custom_img != 'on' ? '' : 'display: none;' ) . '">';

					$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_email_locker_icon" id="wpsl_customized_data_email_locker_icon_fs" name="wpsl_customized_data[wpsl_email_locker_icon][font-size]" value="' . $customizer_data['wpsl_email_locker_icon']['font-size'] . '">';

						$fs	=	$customizer_data['wpsl_email_locker_icon']['font-size'];

						foreach( $icon_font_sizes as $size ){
							$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select id="wpsl_widget_icon" name="wpsl_customized_data[wpsl_email_locker_icon][icon_slug]">';
						$return	.=	'<option value="0">Please Select</option>';

						foreach( $dashicons as $ccc=>$icon ){
							$is	=	$customizer_data['wpsl_email_locker_icon']['icon_slug'];
							$return	.= '<option value="'.$icon.'" '.( $is == $icon ? 'selected' : '' ).'>'.ucwords(str_replace( array('-', 'dashicons'), ' ', $icon )).' '.$ccc.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_email_locker_icon" id="wpsl_customized_data_email_locker_icon_color" name="wpsl_customized_data[wpsl_email_locker_icon][color]" value="' . $customizer_data['wpsl_email_locker_icon']['color'] . '">';

				$return	.=	'</div>';

				$return	.=	'<span class="wpsl_custom_img_icon" style="' . ( $use_custom_img != 'on' ? 'display: none;' : '' ) . '">';

					$custom_image_icon = $customizer_data['wpsl_email_locker_icon']['custom_image_icon'];

					$return	.=	'<input type="hidden" name="wpsl_customized_data[wpsl_email_locker_icon][custom_image_icon]" id="custom_image_icon" value="' . $custom_image_icon . '" class="regular-text" />';
					$return	.=	'<small>(Sqaure, transparent background png, not more than 72x72)</small><br />';
					$return	.=	'<input type="button" class="button-primary" value="Select Icon" id="wpsl_custom_img_btn" />';

				$return	.=	'</span>';

			$return	.=	'</div>';

			$return	.=	'<br /><br />';

			$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Simple Dark|Simple Light">';
				$return	.=	'<span class="wpsl_disabler"></span>';

					$use_gradient	=	$customizer_data['wpsl_left_icon']['use_gradient'];

					$return	.=	'<strong>';
						$return	.=	'Background <br />';
						$return	.=	'<small>Only applies to some templates</small> <br />';
						$return	.=	'<label for="icon_bg_grad_togl"><input id="icon_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_left_icon][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
					$return	.=	'</strong>';

					$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_left_icon" data-type="background" id="wpsl_customized_data_left_icon_bg" name="wpsl_customized_data[wpsl_left_icon][background]" value="' . $customizer_data['wpsl_left_icon']['background'] . '">';
					$return	.=	'</span>';

					$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_left_icon" data-type="gradient_a" id="wpsl_customized_data_left_icon_bga" name="wpsl_customized_data[wpsl_left_icon][gradient_a]" value="' . $customizer_data['wpsl_left_icon']['gradient_a'] . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_left_icon" data-type="gradient_b" id="wpsl_customized_data_left_icon_bgb" name="wpsl_customized_data[wpsl_left_icon][gradient_b]" value="' . $customizer_data['wpsl_left_icon']['gradient_b'] . '">';
					$return	.=	'</span>';

				$return	.=	'</div>';

			$return	.=	'</div>';

			$return	.=	'<div class="wpsl_customizer_section">';

				$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Flat">';
					$return	.=	'<span class="wpsl_disabler"></span>';

					$return	.=	'<strong>';
						$return	.=	'Header Image <br />';
						$return	.=	'<small>Only applies to some templates</small><br />';
						$return	.=	'<small>(Wide, at least 780x230)</small>';
					$return	.=	'</strong>';

					$url = $customizer_data['wpsl_locker_header_img']['url'];
					$return	.=	'<input type="hidden" name="wpsl_customized_data[wpsl_locker_header_img][url]" id="wpsl_header_img" value="' . $url . '" class="regular-text" />';
					$return	.=	'<input type="button" class="button-primary" value="Select Image" id="wpsl_header_img_btn" />';

				$return	.=	'</div>';

			$return	.=	'</div>';

		}

		if( $step == '1' ){

			$return	.=	'<div class="wpsl_customizer_section">';
				$return	.=	'<strong>Headline </strong>';
				$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_customizer_heading" id="wpsl_customized_data_heading_fs" name="wpsl_customized_data[wpsl_customizer_heading][font-size]" value="' . $customizer_data['wpsl_customizer_heading']['font-size'] . '">';

					$fs	=	$customizer_data['wpsl_customizer_heading']['font-size'];

					foreach( $font_sizes as $size ){
						$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
					}
				$return	.=	'</select>';

				$return	.=	'<div class="wpsl_font_family_style_cont">';

					$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".wpsl_customizer_heading" name="wpsl_customized_data[wpsl_customizer_heading][font-family]" id="wpsl_customized_data_heading_ff">';
						$return	.=	'<option value="0">Default Font of Website</option>';

						$ff	=	$customizer_data['wpsl_customizer_heading']['font-family'];

						foreach( $font_families as $font ){
							$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".wpsl_customizer_heading"
												name="wpsl_customized_data[wpsl_customizer_heading][wpsl-font-var]"
												id="wpsl_customizer_heading_fv"
												data-oldval="'.$customizer_data['wpsl_customizer_heading']['wpsl-font-var'].'">';
					$return	.=	'</select>';

				$return	.=	'</div>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_heading" name="wpsl_customized_data[wpsl_customizer_heading][color]" id="wpsl_customized_data_heading_color" value="' . $customizer_data['wpsl_customizer_heading']['color'] . '">';

			$return	.=	'</div>';

			$return	.=	'<div class="wpsl_customizer_section">';
				$return	.=	'<strong>Message </strong>';
				$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_customizer_desc" name="wpsl_customized_data[wpsl_customizer_desc][font-size]" id="wpsl_customized_data_desc_fs">';

					$fs	=	$customizer_data['wpsl_customizer_desc']['font-size'];

					foreach( $font_sizes as $size ){
						$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<div class="wpsl_font_family_style_cont">';

					$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".wpsl_customizer_desc" name="wpsl_customized_data[wpsl_customizer_desc][font-family]" id="wpsl_customized_data_desc_ff">';
						$return	.=	'<option value="0">Default Font of Website</option>';

						$ff	=	$customizer_data['wpsl_customizer_desc']['font-family'];

						foreach( $font_families as $font ){
							$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".wpsl_customizer_desc"
												name="wpsl_customized_data[wpsl_customizer_desc][wpsl-font-var]"
												id="wpsl_customizer_desc_fv"
												data-oldval="'.$customizer_data['wpsl_customizer_desc']['wpsl-font-var'].'">';
					$return	.=	'</select>';

				$return	.=	'</div>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_desc" name="wpsl_customized_data[wpsl_customizer_desc][color]" id="wpsl_customized_data_desc_color" value="' . $customizer_data['wpsl_customizer_desc']['color'] . '">';

			$return	.=	'</div>';

		}

		if( $step == '2' ){

			$return	.=	'<div class="wpsl_customizer_section">';

				$use_gradient	=	$customizer_data['wpsl_customizer_primary_bg']['use_gradient'];

				$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Basic|Simple Light|Simple Dark|Flat|Clean|Material|ColorBlock|Web20|BlankCanvas|PopOut">';
					$return	.=	'<span class="wpsl_disabler"></span>';

					$return	.=	'<strong>';
						$return	.=	'Primary Background <br />';
						$return	.=	'<label for="prmr_bg_bg_grad_togl"><input id="prmr_bg_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_customizer_primary_bg][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
					$return	.=	'</strong>';

					$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_primary_bg" data-type="background" id="wpsl_customized_data_primary_bg_bg" name="wpsl_customized_data[wpsl_customizer_primary_bg][background]" value="' . $customizer_data['wpsl_customizer_primary_bg']['background'] . '">';
					$return	.=	'</span>';

					$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_customizer_primary_bg" data-type="gradient_a" id="wpsl_customized_data_primary_bg_bga" name="wpsl_customized_data[wpsl_customizer_primary_bg][gradient_a]" value="' . $customizer_data['wpsl_customizer_primary_bg']['gradient_a'] . '">';
						$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_customizer_primary_bg" data-type="gradient_b" id="wpsl_customized_data_primary_bg_bgb" name="wpsl_customized_data[wpsl_customizer_primary_bg][gradient_b]" value="' . $customizer_data['wpsl_customizer_primary_bg']['gradient_b'] . '">';
					$return	.=	'</span>';

				$return	.=	'</div>';

			$return	.=	'</div>';

			$return	.=	'<div class="wpsl_customizer_section">';

				$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="ImageBG|ImageBG2">';
					$return	.=	'<span class="wpsl_disabler"></span>';

					$return	.=	'<strong>';
						$return	.=	'Background Image <br />';
						$return	.=	'<small>(Only applies to some templates)</small><br />';
						// $return	.=	'<small>(Square image, at least 740x740)</small>';
					$return	.=	'</strong>';

					$url = $customizer_data['wpsl_customizer_primary_bg_img']['url'];
					$return	.=	'<input type="hidden" name="wpsl_customized_data[wpsl_customizer_primary_bg_img][url]" id="wpsl_bg_img" value="' . $url . '" class="regular-text" />';
					$return	.=	'<input type="button" class="button-primary" value="Select Image" id="wpsl_bg_img_btn" />';

				$return	.=	'</div>';

			$return	.=	'</div>';


		}

		if( $step == '4' ){

			$return	.=	'<div class="wpsl_customizer_section">';
				$return	.=	'<strong>Share Button: </strong>';
				$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".facebook_share" name="wpsl_customized_data[facebook_share][font-size]" id="wpsl_customized_data_facebook_share_fs">';

					$fs	=	$customizer_data['facebook_share']['font-size'];

					foreach( $font_sizes as $size ){
						$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<div class="wpsl_font_family_style_cont">';

					$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".facebook_share" name="wpsl_customized_data[facebook_share][font-family]" id="wpsl_customized_data_facebook_share_ff">';
						$return	.=	'<option value="0">Default Font of Website</option>';

						$ff	=	$customizer_data['facebook_share']['font-family'];

						foreach( $font_families as $font ){
							$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".facebook_share"
												name="wpsl_customized_data[facebook_share][wpsl-font-var]"
												id="wpsl_customized_data_facebook_share_fv"
												data-oldval="'.$customizer_data['facebook_share']['wpsl-font-var'].'">';
					$return	.=	'</select>';

				$return	.=	'</div>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" id="wpsl_customized_data_facebook_share_color" name="wpsl_customized_data[facebook_share][color]" value="' . $customizer_data['facebook_share']['color'] . '" data-appliesto=".facebook_share">';

				$return	.=	'<br /><br />';

				$use_gradient	=	$customizer_data['facebook_share']['use_gradient'];

				$return	.=	'<strong>';
					$return	.=	'Background <br />';
					$return	.=	'<label for="fbshr_bg_grad_togl"><input id="fbshr_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[facebook_share][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
				$return	.=	'</strong>';

				$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".facebook_share" data-type="background" name="wpsl_customized_data[facebook_share][background]" id="wpsl_customized_data_facebook_share_bg" value="' . $customizer_data['facebook_share']['background'] . '">';
				$return	.=	'</span>';

				$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".facebook_share" data-type="gradient_a" name="wpsl_customized_data[facebook_share][gradient_a]" id="wpsl_customized_data_facebook_share_bga" value="' . $customizer_data['facebook_share']['gradient_a'] . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".facebook_share" data-type="gradient_b" name="wpsl_customized_data[facebook_share][gradient_b]" id="wpsl_customized_data_facebook_share_bgb" value="' . $customizer_data['facebook_share']['gradient_b'] . '">';
				$return	.=	'</span>';

			$return	.=	'</div>';

			$return	.=	'<div class="wpsl_customizer_section">';
				$return	.=	'<strong>Tweet Button: </strong>';
				$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".twitter_tweet" name="wpsl_customized_data[twitter_tweet][font-size]" id="wpsl_customized_data_twitter_tweet_fs">';

					$fs	=	$customizer_data['twitter_tweet']['font-size'];

					foreach( $font_sizes as $size ){
						$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<div class="wpsl_font_family_style_cont">';

					$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".twitter_tweet" name="wpsl_customized_data[twitter_tweet][font-family]" id="wpsl_customized_data_twitter_tweet_ff">';
						$return	.=	'<option value="0">Default Font of Website</option>';

						$ff	=	$customizer_data['twitter_tweet']['font-family'];

						foreach( $font_families as $font ){
							$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
						}

					$return	.=	'</select>';

					$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".twitter_tweet"
												name="wpsl_customized_data[twitter_tweet][wpsl-font-var]"
												id="wpsl_customized_data_twitter_tweet_fv"
												data-oldval="'.$customizer_data['twitter_tweet']['wpsl-font-var'].'">';
					$return	.=	'</select>';

				$return	.=	'</div>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" name="wpsl_customized_data[twitter_tweet][color]" id="wpsl_customized_data_twitter_tweet_color" value="' . $customizer_data['twitter_tweet']['color'] . '" data-appliesto=".twitter_tweet">';

				$return	.=	'<br /><br />';

				$use_gradient	=	$customizer_data['twitter_tweet']['use_gradient'];

				$return	.=	'<strong>';
					$return	.=	'Background <br />';
					$return	.=	'<label for="twtrshr_bg_grad_togl"><input id="twtrshr_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[twitter_tweet][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
				$return	.=	'</strong>';

				$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".twitter_tweet" data-type="background" name="wpsl_customized_data[twitter_tweet][background]" id="wpsl_customized_data_twitter_tweet_bg" value="' . $customizer_data['twitter_tweet']['background'] . '">';
				$return	.=	'</span>';

				$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".twitter_tweet" data-type="gradient_a" name="wpsl_customized_data[twitter_tweet][gradient_a]" id="wpsl_customized_data_twitter_tweet_bga" value="' . $customizer_data['twitter_tweet']['gradient_a'] . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".twitter_tweet" data-type="gradient_b" name="wpsl_customized_data[twitter_tweet][gradient_b]" id="wpsl_customized_data_twitter_tweet_bgb" value="' . $customizer_data['twitter_tweet']['gradient_b'] . '">';
				$return	.=	'</span>';

			$return	.=	'</div>';

		}

	}elseif( $type == 'follow' ){

		if( $step == '3' ){

			$return	.=	'<p>Start with one of our pre-designed forms and customize to your liking. Or, build your own from scratch.</p> <br />';

			$return	.=	'<div id="wpsl_preset_changer">';
				$return	.=	'<div><a href="javascript:;" onclick="wpsl_preset( \'follow\', \'flat\' )"><img src="' . WPSL_ROOT_URL . 'assets/images/presets/follow.jpg' . '" title="Flat Design"></a></div>';
				$return	.=	'<div><a href="javascript:;" onclick="wpsl_preset( \'follow\', \'grad\' )"><img src="' . WPSL_ROOT_URL . 'assets/images/presets/follow-grad.jpg' . '" title="Ggradient Design"></a></div>';
				$return	.=	'<div><a href="javascript:;" onclick=""><img src="' . WPSL_ROOT_URL . 'assets/images/presets/follow-custom.jpg' . '" title="Custom"></a></div>';
			$return	.=	'</div>';

		}

		if( $step == '2' ){

		$return	.=	'<div class="wpsl_customizer_section">';

		$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Basic|Simple Light|Simple Dark|Flat|ImageBG|Clean|PopOut">';
			$return	.=	'<span class="wpsl_disabler"></span>';

			$return	.=	'<strong>';
				$use_custom_img	=	$customizer_data['wpsl_email_locker_icon']['use_custom_img'];
				$return	.=	'Icon: <br />';
				$return	.=	'<label for="icon_image_togl"><input id="icon_image_togl" type="checkbox" class="wpsl_icon_img_toggler" name="wpsl_customized_data[wpsl_email_locker_icon][use_custom_img]" ' . ( $use_custom_img == 'on' ? 'checked' : '' ) . ' />Use Custom Image</label>';
			$return	.=	'</strong>';

			$return	.=	'<div class="wpsl_dashicon_icon" style="' . ( $use_custom_img != 'on' ? '' : 'display: none;' ) . '">';

				$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_email_locker_icon" name="wpsl_customized_data[wpsl_email_locker_icon][font-size]" id="wpsl_customized_data_email_locker_icon_fs" value="' . $customizer_data['wpsl_email_locker_icon']['font-size'] . '">';

					$fs	=	$customizer_data['wpsl_email_locker_icon']['font-size'];

					foreach( $icon_font_sizes as $size ){
						$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<select id="wpsl_widget_icon" name="wpsl_customized_data[wpsl_email_locker_icon][icon_slug]">';
					$return	.=	'<option value="0">Please Select</option>';

					foreach( $dashicons as $ccc=>$icon ){
						$is	=	$customizer_data['wpsl_email_locker_icon']['icon_slug'];
						$return	.= '<option value="'.$icon.'" '.( $is == $icon ? 'selected' : '' ).'>'.ucwords(str_replace( array('-', 'dashicons'), ' ', $icon )).' '.$ccc.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_email_locker_icon" name="wpsl_customized_data[wpsl_email_locker_icon][color]" id="wpsl_customized_data_email_locker_icon_color" value="' . $customizer_data['wpsl_email_locker_icon']['color'] . '">';

			$return	.=	'</div>';

			$return	.=	'<span class="wpsl_custom_img_icon" style="' . ( $use_custom_img != 'on' ? 'display: none;' : '' ) . '">';

				$custom_image_icon = $customizer_data['wpsl_email_locker_icon']['custom_image_icon'];

				$return	.=	'<input type="hidden" name="wpsl_customized_data[wpsl_email_locker_icon][custom_image_icon]" id="custom_image_icon" value="' . $custom_image_icon . '" class="regular-text" />';
				$return	.=	'<small>(Sqaure, transparent background png, not more than 72x72)</small><br />';
				$return	.=	'<input type="button" class="button-primary" value="Select Icon" id="wpsl_custom_img_btn" />';

			$return	.=	'</span>';

		$return	.=	'</div>';

			$return	.=	'<br /><br />';

			$use_gradient	=	$customizer_data['wpsl_left_icon']['use_gradient'];

			$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Simple Light|Simple Dark">';
				$return	.=	'<span class="wpsl_disabler"></span>';

				$return	.=	'<strong>';
					$return	.=	'Background <br />';
					$return	.=	'<small>(Only applies to some templates):</small> <br />';
					$return	.=	'<label for="icon_bg_grad_togl"><input id="icon_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_left_icon][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
				$return	.=	'</strong>';

				$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_left_icon" data-type="background" name="wpsl_customized_data[wpsl_left_icon][background]" id="wpsl_customized_data_left_icon_bg" value="' . $customizer_data['wpsl_left_icon']['background'] . '">';
				$return	.=	'</span>';

				$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_left_icon" data-type="gradient_a" name="wpsl_customized_data[wpsl_left_icon][gradient_a]" id="wpsl_customized_data_left_icon_bga" value="' . $customizer_data['wpsl_left_icon']['gradient_a'] . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_left_icon" data-type="gradient_b" name="wpsl_customized_data[wpsl_left_icon][gradient_b]" id="wpsl_customized_data_left_icon_bgb" value="' . $customizer_data['wpsl_left_icon']['gradient_b'] . '">';
				$return	.=	'</span>';

			$return	.=	'</div>';
		$return	.=	'</div>';

		$return	.=	'<div class="wpsl_customizer_section">';

		$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Flat">';
			$return	.=	'<span class="wpsl_disabler"></span>';

			$return	.=	'<strong>';
				$return	.=	'Header Image: <br />';
				$return	.=	'<small>Only applies to some templates</small><br />';
				$return	.=	'<small>(Wide, at least 780x230)</small>';
			$return	.=	'</strong>';

			$url = $customizer_data['wpsl_locker_header_img']['url'];

			$return	.=	'<input type="hidden" name="wpsl_customized_data[wpsl_locker_header_img][url]" id="wpsl_header_img" value="' . $url . '" class="regular-text" />';
			$return	.=	'<input type="button" class="button-primary" value="Select Image" id="wpsl_header_img_btn" />';

		$return	.=	'</div> ';
		$return	.=	'</div>';

		}

		if( $step == '1' ){

		$return	.=	'<div class="wpsl_customizer_section">';
			$return	.=	'<strong>Headline </strong>';
			$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_customizer_heading" name="wpsl_customized_data[wpsl_customizer_heading][font-size]" id="wpsl_customized_data_heading_fs" value="' . $customizer_data['wpsl_customizer_heading']['font-size'] . '">';

				$fs	=	$customizer_data['wpsl_customizer_heading']['font-size'];

				foreach( $font_sizes as $size ){
					$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
				}

			$return	.=	'</select>';

			$return	.=	'<div class="wpsl_font_family_style_cont">';

				$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".wpsl_customizer_heading" name="wpsl_customized_data[wpsl_customizer_heading][font-family]" id="wpsl_customized_data_heading_ff">';
					$return	.=	'<option value="0">Default Font of Website</option>';

					$ff	=	$customizer_data['wpsl_customizer_heading']['font-family'];

					foreach( $font_families as $font ){
						$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".wpsl_customizer_heading"
												name="wpsl_customized_data[wpsl_customizer_heading][wpsl-font-var]"
												id="wpsl_customizer_heading_fv"
												data-oldval="'.$customizer_data['wpsl_customizer_heading']['wpsl-font-var'].'">';
				$return	.=	'</select>';

			$return	.=	'</div>';

			$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_heading" name="wpsl_customized_data[wpsl_customizer_heading][color]" id="wpsl_customized_data_heading_color" value="' . $customizer_data['wpsl_customizer_heading']['color'] . '">';

		$return	.=	'</div>';

		$return	.=	'<div class="wpsl_customizer_section">';
			$return	.=	'<strong>Message </strong>';
			$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".wpsl_customizer_desc" name="wpsl_customized_data[wpsl_customizer_desc][font-size]" id="wpsl_customized_data_desc_fs">';

				$fs	=	$customizer_data['wpsl_customizer_desc']['font-size'];

				foreach( $font_sizes as $size ){
					$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
				}

			$return	.=	'</select>';

			$return	.=	'<div class="wpsl_font_family_style_cont">';

				$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".wpsl_customizer_desc" name="wpsl_customized_data[wpsl_customizer_desc][font-family]" id="wpsl_customized_data_desc_ff">';
					$return	.=	'<option value="0">Default Font of Website</option>';

					$ff	=	$customizer_data['wpsl_customizer_desc']['font-family'];

					foreach( $font_families as $font ){
						$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".wpsl_customizer_desc"
												name="wpsl_customized_data[wpsl_customizer_desc][wpsl-font-var]"
												id="wpsl_customizer_desc_fv"
												data-oldval="'.$customizer_data['wpsl_customizer_desc']['wpsl-font-var'].'">';
				$return	.=	'</select>';

			$return	.=	'</div>';

			$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_desc" name="wpsl_customized_data[wpsl_customizer_desc][color]" id="wpsl_customized_data_desc_color" value="' . $customizer_data['wpsl_customizer_desc']['color'] . '">';

		$return	.=	'</div>';

		}

		if( $step == '2' ){

		$return	.=	'<div class="wpsl_customizer_section">';

			$use_gradient	=	$customizer_data['wpsl_customizer_primary_bg']['use_gradient'];

			$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="Basic|Simple Light|Simple Dark|Flat|Clean|Material|ColorBlock|Web20|BlankCanvas|PopOut">';
				$return	.=	'<span class="wpsl_disabler"></span>';

				$return	.=	'<strong>';
					$return	.=	'Primary Background <br />';
					$return	.=	'<label for="prmr_bg_grad_togl"><input id="prmr_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_customizer_primary_bg][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
				$return	.=	'</strong>';

				$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_primary_bg" data-type="background" name="wpsl_customized_data[wpsl_customizer_primary_bg][background]" id="wpsl_customized_data_primary_bg_bg" value="' . $customizer_data['wpsl_customizer_primary_bg']['background'] . '">';
				$return	.=	'</span>';

				$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_customizer_primary_bg" data-type="gradient_a" name="wpsl_customized_data[wpsl_customizer_primary_bg][gradient_a]" id="wpsl_customized_data_primary_bg_bga" value="' . $customizer_data['wpsl_customizer_primary_bg']['gradient_a'] . '">';
					$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_customizer_primary_bg" data-type="gradient_b" name="wpsl_customized_data[wpsl_customizer_primary_bg][gradient_b]" id="wpsl_customized_data_primary_bg_bgb" value="' . $customizer_data['wpsl_customizer_primary_bg']['gradient_b'] . '">';
				$return	.=	'</span>';

			$return	.=	'</div>';

		$return	.=	'</div>';

		$return	.=	'<div class="wpsl_customizer_section">';

		$return	.=	'<div class="wpsl_admin_only_applies_to_few" data-templates="ImageBG|ImageBG2">';
			$return	.=	'<span class="wpsl_disabler"></span>';

			$return	.=	'<strong>';
				$return	.=	'Background Image: <br />';
				$return	.=	'<small>(Only applies to some templates)</small><br />';
				// $return	.=	'<small>(Square image, at least 740x740)</small>';
			$return	.=	'</strong>';

			$url = $customizer_data['wpsl_customizer_primary_bg_img']['url'];

			$return	.=	'<input type="hidden" name="wpsl_customized_data[wpsl_customizer_primary_bg_img][url]" id="wpsl_bg_img" value="' . $url . '" class="regular-text" />';
			$return	.=	'<input type="button" class="button-primary" value="Select Image" id="wpsl_bg_img_btn" />';

		$return	.=	'</div> ';
		$return	.=	'</div>';

		// NOTE: Ready for trash
		// $return	.=	'<div class="wpsl_customizer_section">';
		//
		// 	$use_gradient	=	$customizer_data['wpsl_customizer_secondary_bg']['use_gradient'];
		//
		// 	$return	.=	'<strong>';
		// 		$return	.=	'Secondary Background <br />';
		// 		$return	.=	'<small>(Only applies to some templates)</small> <br />';
		// 		$return	.=	'<label for="scndr_bg_grad_togl"><input id="scndr_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[wpsl_customizer_secondary_bg][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
		// 	$return	.=	'</strong>';
		//
		// 	$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
		// 		$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".wpsl_customizer_secondary_bg" data-type="background" name="wpsl_customized_data[wpsl_customizer_secondary_bg][background]" value="' . $customizer_data['wpsl_customizer_secondary_bg']['background'] . '">';
		// 	$return	.=	'</span>';
		//
		// 	$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
		// 		$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".wpsl_customizer_secondary_bg" data-type="gradient_a" name="wpsl_customized_data[wpsl_customizer_secondary_bg][gradient_a]" value="' . $customizer_data['wpsl_customizer_secondary_bg']['gradient_a'] . '">';
		// 		$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".wpsl_customizer_secondary_bg" data-type="gradient_b" name="wpsl_customized_data[wpsl_customizer_secondary_bg][gradient_b]" value="' . $customizer_data['wpsl_customizer_secondary_bg']['gradient_b'] . '">';
		// 	$return	.=	'</span>';
		//
		// $return	.=	'</div>';

		}

		if( $step == '4' ){

		$return	.=	'<div class="wpsl_customizer_section">';
			$return	.=	'<strong>Instagram Follow Button: </strong>';
			$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".instagram_follow" name="wpsl_customized_data[instagram_follow][font-size]" id="wpsl_customized_data_instagram_follow_fs">';

				$fs	=	$customizer_data['instagram_follow']['font-size'];

				foreach( $font_sizes as $size ){
					$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
				}

			$return	.=	'</select>';

			$return	.=	'<div class="wpsl_font_family_style_cont">';

				$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".instagram_follow" id="wpsl_customized_data_instagram_follow_ff" name="wpsl_customized_data[instagram_follow][font-family]">';
					$return	.=	'<option value="0">Default Font of Website</option>';

					$ff	=	$customizer_data['instagram_follow']['font-family'];

					foreach( $font_families as $font ){
						$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".instagram_follow"
											name="wpsl_customized_data[instagram_follow][wpsl-font-var]"
											id="wpsl_customized_data_instagram_follow_fv"
											data-oldval="'.$customizer_data['instagram_follow']['wpsl-font-var'].'">';
				$return	.=	'</select>';

			$return	.=	'</div>';

			$return	.=	'<input type="text" class="wpsl_colorpicker" name="wpsl_customized_data[instagram_follow][color]" value="' . $customizer_data['instagram_follow']['color'] . '" data-appliesto=".instagram_follow" id="wpsl_customized_data_instagram_follow_color">';

			$return	.=	'<br /><br />';

			$use_gradient	=	$customizer_data['instagram_follow']['use_gradient'];

			$return	.=	'<strong>';
				$return	.=	'Background <br />';
				$return	.=	'<label for="fblik_bg_grad_togl"><input id="fblik_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[instagram_follow][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
			$return	.=	'</strong>';

			$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".instagram_follow" data-type="background" name="wpsl_customized_data[instagram_follow][background]" id="wpsl_customized_data_insta_follow_bg" value="' . $customizer_data['instagram_follow']['background'] . '">';
			$return	.=	'</span>';

			$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
				$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".instagram_follow" data-type="gradient_a" name="wpsl_customized_data[instagram_follow][gradient_a]" id="wpsl_customized_data_insta_follow_bga" value="' . $customizer_data['instagram_follow']['gradient_a'] . '">';
				$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".instagram_follow" data-type="gradient_b" name="wpsl_customized_data[instagram_follow][gradient_b]" id="wpsl_customized_data_insta_follow_bgb" value="' . $customizer_data['instagram_follow']['gradient_b'] . '">';
			$return	.=	'</span>';

		$return	.=	'</div>';

		$return	.=	'<div class="wpsl_customizer_section">';
			$return	.=	'<strong>Youtube Subscribe Button: </strong>';
			$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".youtube_subscribe" name="wpsl_customized_data[youtube_subscribe][font-size]" id="wpsl_customized_data_youtube_subscribe_fs">';

				$fs	=	$customizer_data['youtube_subscribe']['font-size'];

				foreach( $font_sizes as $size ){
					$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
				}

			$return	.=	'</select>';

			$return	.=	'<div class="wpsl_font_family_style_cont">';

				$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".youtube_subscribe" id="wpsl_customized_data_youtube_subscribe_ff" name="wpsl_customized_data[youtube_subscribe][font-family]">';
					$return	.=	'<option value="0">Default Font of Website</option>';

					$ff	=	$customizer_data['youtube_subscribe']['font-family'];

					foreach( $font_families as $font ){
						$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".youtube_subscribe"
											name="wpsl_customized_data[youtube_subscribe][wpsl-font-var]"
											id="wpsl_customized_data_youtube_subscribe_fv"
											data-oldval="'.$customizer_data['youtube_subscribe']['wpsl-font-var'].'">';
				$return	.=	'</select>';

			$return	.=	'</div>';

			$return	.=	'<input type="text" class="wpsl_colorpicker" name="wpsl_customized_data[youtube_subscribe][color]" value="' . $customizer_data['youtube_subscribe']['color'] . '" data-appliesto=".youtube_subscribe" id="wpsl_customized_data_youtube_subscribe_color">';

			$return	.=	'<br /><br />';

			$use_gradient	=	$customizer_data['youtube_subscribe']['use_gradient'];

			$return	.=	'<strong>';
				$return	.=	'Background <br />';
				$return	.=	'<label for="ytsbs_bg_grad_togl"><input id="ytsbs_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[youtube_subscribe][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
			$return	.=	'</strong>';

			$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".youtube_subscribe" data-type="background" name="wpsl_customized_data[youtube_subscribe][background]" id="wpsl_customized_data_yt_subscribe_bg" value="' . $customizer_data['youtube_subscribe']['background'] . '">';
			$return	.=	'</span>';

			$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
				$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".youtube_subscribe" data-type="gradient_a" name="wpsl_customized_data[youtube_subscribe][gradient_a]" id="wpsl_customized_data_yt_subscribe_bga" value="' . $customizer_data['youtube_subscribe']['gradient_a'] . '">';
				$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".youtube_subscribe" data-type="gradient_b" name="wpsl_customized_data[youtube_subscribe][gradient_b]" id="wpsl_customized_data_yt_subscribe_bgb" value="' . $customizer_data['youtube_subscribe']['gradient_b'] . '">';
			$return	.=	'</span>';

		$return	.=	'</div>';

		$return	.=	'<div class="wpsl_customizer_section">';
			$return	.=	'<strong>Twitter Follow Button: </strong>';
			$return	.=	'<select class="wpsl_font_size_selector" data-appliesto=".twitter_follow" name="wpsl_customized_data[twitter_follow][font-size]" id="wpsl_customized_data_twitter_follow_fs">';

				$fs	=	$customizer_data['twitter_follow']['font-size'];
				foreach( $font_sizes as $size ){
					$return	.= '<option value="'.$size.'" '.( $fs == $size ? 'selected' : '' ).'>'.$size.'</option>';
				}

			$return	.=	'</select>';

			$return	.=	'<div class="wpsl_font_family_style_cont">';

				$return	.=	'<select class="wpsl_font_family_selector" data-appliesto=".twitter_follow" id="wpsl_customized_data_twitter_follow_ff" name="wpsl_customized_data[twitter_follow][font-family]">';
					$return	.=	'<option value="0">Default Font of Website</option>';

					$ff	=	$customizer_data['twitter_follow']['font-family'];
					foreach( $font_families as $font ){
						$return	.= '<option value="'.$font.'" '.( $ff == $font ? 'selected' : '' ).'>'.$font.'</option>';
					}

				$return	.=	'</select>';

				$return	.=	'<select class="wpsl_font_style_selector" style="display: none;" data-appliesto=".twitter_follow"
											name="wpsl_customized_data[twitter_follow][wpsl-font-var]"
											id="wpsl_customized_data_twitter_follow_fv"
											data-oldval="'.$customizer_data['twitter_follow']['wpsl-font-var'].'">';
				$return	.=	'</select>';

			$return	.=	'</div>';

			$return	.=	'<input type="text" class="wpsl_colorpicker" name="wpsl_customized_data[twitter_follow][color]" value="' . $customizer_data['twitter_follow']['color'] . '" data-appliesto=".twitter_follow" id="wpsl_customized_data_twitter_follow_color">';

			$return	.=	'<br /><br />';

			$use_gradient	=	$customizer_data['twitter_follow']['use_gradient'];

			$return	.=	'<strong>';
				$return	.=	'Background <br />';
				$return	.=	'<label for="twtrfl_bg_grad_togl"><input id="twtrfl_bg_grad_togl" type="checkbox" class="wpsl_gradient_toggler" name="wpsl_customized_data[twitter_follow][use_gradient]" ' . ( $use_gradient == 'on' ? 'checked' : '' ) . ' />Gradient</label>';
			$return	.=	'</strong>';

			$return	.=	'<span class="wpsl_plain_color" style="' . ( $use_gradient != 'on' ? '' : 'display: none;' ) . '">';
				$return	.=	'<input type="text" class="wpsl_colorpicker" data-appliesto=".twitter_follow" data-type="background" name="wpsl_customized_data[twitter_follow][background]" id="wpsl_customized_data_twitter_follow_bg" value="' . $customizer_data['twitter_follow']['background'] . '">';
			$return	.=	'</span>';

			$return	.=	'<span class="gradient_option" style="' . ( $use_gradient != 'on' ? 'display: none;' : '' ) . '">';
				$return	.=	'<input type="text" class="wpsl_colorpicker gradient_a" data-appliesto=".twitter_follow" data-type="gradient_a" name="wpsl_customized_data[twitter_follow][gradient_a]" id="wpsl_customized_data_twitter_follow_bga" value="' . $customizer_data['twitter_follow']['gradient_a'] . '">';
				$return	.=	'<input type="text" class="wpsl_colorpicker gradient_b" data-appliesto=".twitter_follow" data-type="gradient_b" name="wpsl_customized_data[twitter_follow][gradient_b]" id="wpsl_customized_data_twitter_follow_bgb" value="' . $customizer_data['twitter_follow']['gradient_b'] . '">';
			$return	.=	'</span>';

		$return	.=	'</div>';

		}

	}

	return $return;

}

function wpsl_generate_customizer_css( $customizer_data, $parent_selector='#wpsl_preview_container' ){

	$return	=	'';

	$return	.=	'<style media="screen" class="wpslcnc_preview_styles">';

		$font_fams_ids = array(
			'wpsl_customizer_heading',
			'wpsl_customizer_desc',
			'wpsl_customizer_textbox',
			'wpsl_customizer_button',

			'wpslfw_button',

			'facebook_share',
			'twitter_tweet',
			'instagram_follow',
			'youtube_subscribe',
			'twitter_follow'
		);

		$font_families = array();
		foreach( $font_fams_ids as $font_fam_id ){
			
			if( !empty($customizer_data[$font_fam_id]['font-family']) ){
				$font_fam = $customizer_data[$font_fam_id]['font-family'];

				$font_var = $customizer_data[$font_fam_id]['wpsl-font-var'];
				$font_families[]	=	$font_fam.( $font_var != 0 && $font_var != '' ? ':'.$font_var : '' );
			}

		}

		// $font_families[]	=	$customizer_data['wpsl_customizer_heading']['font-family'];
		// $font_families[]	=	$customizer_data['wpsl_customizer_desc']['font-family'];
		// $font_families[]	=	$customizer_data['wpsl_customizer_textbox']['font-family'];
		// $font_families[]	=	$customizer_data['wpsl_customizer_button']['font-family'];
		//
		// $font_families[]	=	$customizer_data['wpslfw_button']['font-family'];
		//
		// $font_families[]	=	$customizer_data['facebook_share']['font-family'];
		// $font_families[]	=	$customizer_data['twitter_tweet']['font-family'];
		// $font_families[]	=	$customizer_data['instagram_follow']['font-family'];
		// $font_families[]	=	$customizer_data['youtube_subscribe']['font-family'];
		// $font_families[]	=	$customizer_data['twitter_follow']['font-family'];


		foreach( $font_families as $f_family ){

			if( $f_family != "0" && $f_family != '' ){
				$return	.=	'@import url("https://fonts.googleapis.com/css?family='.str_replace(' ', '+', $f_family).'");';
			}

		}

		if( is_array($customizer_data) && count($customizer_data) > 0 ){

		foreach( $customizer_data as $selector=>$data ){
			$return	.=	"$parent_selector .$selector{";

				if( !is_array($data) ) 
					continue;

				foreach( $data as $prop=>$val ){

					$imp = '';
					if( ($prop == 'color' || $prop == 'font-family') && $parent_selector != '#wpsl_preview_container' )
						$imp = ' !important';


					if( $prop != 'icon_slug' && $prop != 'gradient_a' && $prop != 'gradient_b' && $prop != 'use_gradient' && $prop != 'wpsl-font-var' ){
						if( $prop == 'background' && !empty($data['use_gradient']) && $data['use_gradient'] == 'on' ) continue;
						$return	.=	"$prop: $val $imp;";
					}

					if( $prop == 'wpsl-font-var' && $val != '' && $val != "0" ){

						if( $val != 'regular' && $val != 'italic' )
							$return	.=	'font-weight: '.intval($val).( $parent_selector != '#wpsl_preview_container' ? ' !important;' : ';');

						if( strpos($val, 'italic') !== FALSE )
							$return	.=	'font-style: italic '.( $parent_selector != '#wpsl_preview_container' ? ' !important;' : ';');
					}

				}

				if( !empty($data['use_gradient']) && $data['use_gradient'] == 'on' ){
					$return	.=	"background: linear-gradient(".$data['gradient_a'].", ".$data['gradient_b'].") ".( $parent_selector != '#wpsl_preview_container' ? ' !important;' : '');
				}

			$return	.=	"}";

		}

		}

	$return	.=	'</style>';

	return $return;

}


/**
 * Show Admin Help Section
 */
function wpsl_show_admin_help_section( $section ){

	$doc			=	WPSL_ROOT_URL . 'docs/'.$section.'.html';
	$content	=	file_get_contents( $doc );

	echo str_replace( '%docs_url%', WPSL_ROOT_URL . 'docs/images/', $content );

}


/**
 * Return all activecampaign lists
 */
function wpsl_list_activecampaign_lists()
{

	// $ac_api_url	=	get_option('wpsl_activecampaign_api_url');
	// $ac_api_key	=	get_option('wpsl_activecampaign_api_key');
	//
	// if( $ac_api_url != '' && $ac_api_key != '' ){
	//
	// 	$ActiveCampaign	=	new ActiveCampaign($ac_api_url, $ac_api_key);
	//
	// 	$activecampaign_lists	=	$ActiveCampaign->api("list/list_", [
	// 		'ids'  => 'all'
	// 	]);
	//
	// 	$rtt = array();
	// 	if( $activecampaign_lists->result_message == 'Success: Something is returned' ){
	// 		foreach( $activecampaign_lists as $k=>$v){
	// 			if( is_numeric($k) )
	// 				$rtt[$v->id]	= $v->name.' ('.$v->subscriber_count.')';
	// 		}
	// 	}
	//
	// }
	//
	// return $rtt;

	return get_option('wpsl_activecampaign_cache_lists');

}


/**
 * Return all mailchimp lists
 */
function wpsl_list_mailchimp_lists()
{

	// $mailchimp_api	=	get_option('wpsl_mailchimp_api_key');
	//
	// $lists		=	array();
	// if( $mailchimp_api != '' ){
	// 	$mc_api		= new MailChimp($mailchimp_api);
	// 	$mc_respo	=	$mc_api->get("lists");
	//
	// 	if( count($mc_respo['lists']) > 0 ){
	//
	// 		foreach( (array) $mc_respo['lists'] as $list ){
	// 			$lists[$list['id']]	=	$list['name'];
	// 		}
	//
	// 	}
	// }
	//
	// return $lists;

	return get_option('wpsl_mailchimp_cache_lists');

}

/**
 * Return all ConstantContact lists
 */
function wpsl_list_constantcontact_lists()
{

	// $cc_list_o	=	get_option('wpsl_constantcontact_cache_lists');
	//
	// $cc_lists		=	array();
	// if( is_array($cc_list_o) && count($cc_list_o) > 0 ){
	// 	foreach( (array) $cc_list_o as $list ){
	// 		$cc_lists[$list->id]	=	$list->name;
	// 	}
	// }
	//
	// return $cc_lists;

	return get_option('wpsl_constantcontact_cache_lists');

}

/**
 * Return all Aweber lists
 */
function wpsl_list_aweber_lists()
{

	return get_option('wpsl_aweber_cache_lists');

}

/**
 * Return all Drip campaigns
 */
function wpsl_list_drip_campaigns()
{
	return get_option('wpsl_drip_cache_campaigns');
}


/**
* Return all Hubspot Lists
*/
function wpsl_list_hubspot_lists()
{
	return get_option('wpsl_hubspot_cache_lists');
}

/**
 * Return all Campaign Monitor lists
 */
function wpsl_list_campaignmonitor_lists()
{
	return get_option('wpsl_campaignmonitor_cache_lists');
}

/**
 * Return all GetResponse lists
 */
function wpsl_list_getresponse_lists()
{
	return get_option('wpsl_getresponse_cache_lists');
}

/**
 * Return all ConvertKit forms
 */
function wpsl_list_convertkit_forms()
{
	return get_option('wpsl_convertkit_cache_forms');
}
